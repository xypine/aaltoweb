import{S as xe,i as $e,s as et,l as p,m,p as g,h as _,q as O,b as V,n as he,o as Ft,u as U,a as B,e as Je,v as S,c as C,J as f,K as H,w as Fe,L as Pe,M as We,N as ke,O as Wt,r as N,P as ze,f as $,d as He,t as se,Q as Ie,x as De,y as Ve,z as Ue,C as Se,g as qe,R as yt,T as Gt,U as Tt,V as Nt,W as wt}from"../chunks/index-3a383381.js";import{i as Qt,m as Yt,c as Xt,d as Zt,f as xt,p as $t,a as It,s as el,h as tl,e as ll}from"../chunks/@vite-plugin-wasm-pack@aalto-6abd01f2.js";function ol(l){let e,t,o,r,n,i,s=l[1]&&Ot(l);return{c(){e=p("p"),t=U(l[0]),o=B(),s&&s.c(),r=Je(),this.h()},l(u){e=m(u,"P",{class:!0});var a=g(e);t=S(a,l[0]),a.forEach(_),o=C(u),s&&s.l(u),r=Je(),this.h()},h(){O(e,"class","svelte-2l6lj1")},m(u,a){V(u,e,a),f(e,t),V(u,o,a),s&&s.m(u,a),V(u,r,a),n||(i=H(e,"click",l[7]),n=!0)},p(u,a){a&1&&Fe(t,u[0]),u[1]?s?s.p(u,a):(s=Ot(u),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null)},d(u){u&&_(e),u&&_(o),s&&s.d(u),u&&_(r),n=!1,i()}}}function nl(l){let e,t,o,r,n,i=l[1]&&Pt(l);return{c(){e=p("input"),t=B(),i&&i.c(),o=Je(),this.h()},l(s){e=m(s,"INPUT",{class:!0}),t=C(s),i&&i.l(s),o=Je(),this.h()},h(){O(e,"class","svelte-2l6lj1")},m(s,u){V(s,e,u),Pe(e,l[0]),V(s,t,u),i&&i.m(s,u),V(s,o,u),r||(n=[H(e,"click",rl),H(e,"input",l[5])],r=!0)},p(s,u){u&1&&e.value!==s[0]&&Pe(e,s[0]),s[1]?i?i.p(s,u):(i=Pt(s),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},d(s){s&&_(e),s&&_(t),i&&i.d(s),s&&_(o),r=!1,We(n)}}}function Ot(l){let e,t,o,r;return{c(){e=p("button"),t=U("edit")},l(n){e=m(n,"BUTTON",{});var i=g(e);t=S(i,"edit"),i.forEach(_)},m(n,i){V(n,e,i),f(e,t),o||(r=H(e,"click",l[8]),o=!0)},p:he,d(n){n&&_(e),o=!1,r()}}}function Pt(l){let e,t,o,r;return{c(){e=p("button"),t=U("done")},l(n){e=m(n,"BUTTON",{});var i=g(e);t=S(i,"done"),i.forEach(_)},m(n,i){V(n,e,i),f(e,t),o||(r=H(e,"click",l[6]),o=!0)},p:he,d(n){n&&_(e),o=!1,r()}}}function sl(l){let e;function t(n,i){return n[3]?nl:ol}let o=t(l),r=o(l);return{c(){e=p("main"),r.c(),this.h()},l(n){e=m(n,"MAIN",{style:!0,class:!0});var i=g(e);r.l(i),i.forEach(_),this.h()},h(){O(e,"style",l[2]),O(e,"class","svelte-2l6lj1")},m(n,i){V(n,e,i),r.m(e,null)},p(n,[i]){o===(o=t(n))&&r?r.p(n,i):(r.d(1),r=o(n),r&&(r.c(),r.m(e,null))),i&4&&O(e,"style",n[2])},i:he,o:he,d(n){n&&_(e),r.d()}}}const rl=l=>{l.preventDefault(),l.stopPropagation()};function il(l,e,t){let{value:o}=e,{buttons:r=!1}=e,{style:n=""}=e,i=!1;function s(b){t(3,i=b)}function u(b,j){s(j),b.preventDefault(),b.stopPropagation()}Ft(()=>{window.addEventListener("click",()=>{t(3,i=!1)})});function a(){o=this.value,t(0,o)}const v=b=>{u(b,!1)},c=b=>{u(b,!0)},k=b=>{u(b,!0)};return l.$$set=b=>{"value"in b&&t(0,o=b.value),"buttons"in b&&t(1,r=b.buttons),"style"in b&&t(2,n=b.style)},[o,r,n,i,u,a,v,c,k]}class Dt extends xe{constructor(e){super(),$e(this,e,il,sl,et,{value:0,buttons:1,style:2})}}function al(l){let e,t,o;return{c(){e=p("main"),this.h()},l(r){e=m(r,"MAIN",{style:!0,title:!0,class:!0});var n=g(e);n.forEach(_),this.h()},h(){O(e,"style",t="--bg:"+l[0].color+";"+l[1]),O(e,"title",o=l[0].value),O(e,"class","svelte-14rb7sg"),ke(e,"selectable",l[2]),ke(e,"selected",l[3]),ke(e,"partially-selected",l[4])},m(r,n){V(r,e,n)},p(r,[n]){n&3&&t!==(t="--bg:"+r[0].color+";"+r[1])&&O(e,"style",t),n&1&&o!==(o=r[0].value)&&O(e,"title",o),n&4&&ke(e,"selectable",r[2]),n&8&&ke(e,"selected",r[3]),n&16&&ke(e,"partially-selected",r[4])},i:he,o:he,d(r){r&&_(e)}}}function ul(l,e,t){let{rule:o}=e,{style:r=""}=e,{selectable:n=!1}=e,{selected:i=!1}=e,{partially_selected:s=!1}=e;return l.$$set=u=>{"rule"in u&&t(0,o=u.rule),"style"in u&&t(1,r=u.style),"selectable"in u&&t(2,n=u.selectable),"selected"in u&&t(3,i=u.selected),"partially_selected"in u&&t(4,s=u.partially_selected)},[o,r,n,i,s]}class tt extends xe{constructor(e){super(),$e(this,e,ul,al,et,{rule:0,style:1,selectable:2,selected:3,partially_selected:4})}}function Vt(l,e,t){const o=l.slice();return o[35]=e[t],o[37]=t,o}function Ut(l,e,t){const o=l.slice();return o[38]=e[t],o}function St(l,e,t){const o=l.slice();return o[35]=e[t],o[41]=e,o[37]=t,o}function Bt(l,e,t){const o=l.slice();return o[42]=e[t],o[43]=e,o[44]=t,o}function Ct(l,e,t){const o=l.slice();return o[42]=e[t],o}function Rt(l,e,t){const o=l.slice();return o[35]=e[t],o}function Lt(l,e,t){const o=l.slice();return o[49]=e[t],o[37]=t,o}function cl(l){let e,t;return{c(){e=p("p"),t=U("Waiting for wasm to initialize...")},l(o){e=m(o,"P",{});var r=g(e);t=S(r,"Waiting for wasm to initialize..."),r.forEach(_)},m(o,r){V(o,e,r),f(e,t)},p:he,d(o){o&&_(e)}}}function fl(l){let e,t,o,r,n,i,s,u,a,v,c,k,b,j,I,W,K;return{c(){e=p("input"),t=B(),o=p("label"),r=U("N"),n=B(),i=p("input"),s=B(),u=p("button"),a=U("extract"),v=B(),c=p("div"),k=p("progress"),b=B(),j=p("p"),I=U(l[6]),this.h()},l(T){e=m(T,"INPUT",{type:!0}),t=C(T),o=m(T,"LABEL",{for:!0});var P=g(o);r=S(P,"N"),P.forEach(_),n=C(T),i=m(T,"INPUT",{type:!0,id:!0}),s=C(T),u=m(T,"BUTTON",{});var A=g(u);a=S(A,"extract"),A.forEach(_),v=C(T),c=m(T,"DIV",{});var Y=g(c);k=m(Y,"PROGRESS",{style:!0,max:!0}),g(k).forEach(_),b=C(Y),j=m(Y,"P",{});var R=g(j);I=S(R,l[6]),R.forEach(_),Y.forEach(_),this.h()},h(){O(e,"type","file"),O(o,"for","extract-N"),O(i,"type","number"),O(i,"id","extract-N"),N(k,"width","100%"),k.value=l[5],O(k,"max",100)},m(T,P){V(T,e,P),V(T,t,P),V(T,o,P),f(o,r),V(T,n,P),V(T,i,P),Pe(i,l[7]),V(T,s,P),V(T,u,P),f(u,a),V(T,v,P),V(T,c,P),f(c,k),f(c,b),f(c,j),f(j,I),W||(K=[H(e,"change",l[22]),H(i,"input",l[23]),H(u,"click",l[20])],W=!0)},p(T,P){P[0]&128&&Gt(i.value)!==T[7]&&Pe(i,T[7]),P[0]&32&&(k.value=T[5]),P[0]&64&&Fe(I,T[6])},d(T){T&&_(e),T&&_(t),T&&_(o),T&&_(n),T&&_(i),T&&_(s),T&&_(u),T&&_(v),T&&_(c),W=!1,We(K)}}}function jt(l){let e,t,o,r,n;t=new tt({props:{rule:l[49],selectable:!0,selected:l[10]==l[37],partially_selected:l[9]==l[37]&&l[10]!=l[37]}});function i(){return l[24](l[37])}function s(...u){return l[25](l[37],...u)}return{c(){e=p("div"),De(t.$$.fragment),this.h()},l(u){e=m(u,"DIV",{class:!0});var a=g(e);Ve(t.$$.fragment,a),a.forEach(_),this.h()},h(){O(e,"class","rule-wrapper")},m(u,a){V(u,e,a),Ue(t,e,null),o=!0,r||(n=[H(e,"click",i),H(e,"mouseover",s),H(e,"focus",ml)],r=!0)},p(u,a){l=u;const v={};a[0]&1&&(v.rule=l[49]),a[0]&1024&&(v.selected=l[10]==l[37]),a[0]&1536&&(v.partially_selected=l[9]==l[37]&&l[10]!=l[37]),t.$set(v)},i(u){o||($(t.$$.fragment,u),o=!0)},o(u){se(t.$$.fragment,u),o=!1},d(u){u&&_(e),Se(t),r=!1,We(n)}}}function Mt(l){let e,t=l[35]+"",o,r,n,i,s,u;function a(){return l[26](l[35])}return{c(){e=p("div"),o=U(t),r=B(),n=p("button"),i=U("\xD7"),this.h()},l(v){e=m(v,"DIV",{class:!0});var c=g(e);o=S(c,t),r=C(c),n=m(c,"BUTTON",{class:!0});var k=g(n);i=S(k,"\xD7"),k.forEach(_),c.forEach(_),this.h()},h(){O(n,"class","svelte-4k8o2m"),O(e,"class","available-connector svelte-4k8o2m"),ke(e,"shadow",!l[1].includes(l[35]))},m(v,c){V(v,e,c),f(e,o),f(e,r),f(e,n),f(n,i),s||(u=H(n,"click",a),s=!0)},p(v,c){l=v,c[0]&8&&t!==(t=l[35]+"")&&Fe(o,t),c[0]&10&&ke(e,"shadow",!l[1].includes(l[35]))},d(v){v&&_(e),s=!1,u()}}}function _l(l){let e,t;return{c(){e=p("h1"),t=U("Please select a tile"),this.h()},l(o){e=m(o,"H1",{class:!0});var r=g(e);t=S(r,"Please select a tile"),r.forEach(_),this.h()},h(){O(e,"class","svelte-4k8o2m")},m(o,r){V(o,e,r),f(e,t)},p:he,i:he,o:he,d(o){o&&_(e)}}}function hl(l){let e,t,o,r,n,i,s,u,a,v,c,k,b,j,I,W,K,T,P,A,Y,R,X;o=new tt({props:{rule:l[0][l[10]],style:"min-width:100px;min-height:100px;transform: translate(-50%,-50%);"}});let re=l[0][l[10]].connectors,J=[];for(let h=0;h<re.length;h+=1)J[h]=zt(St(l,re,h));let oe=l[0][l[10]].connectors,L=[];for(let h=0;h<oe.length;h+=1)L[h]=qt(Vt(l,oe,h));const de=h=>se(L[h],1,1,()=>{L[h]=null});function Ee(h){l[31](h)}let be={style:"flex:1;"};l[0][l[10]].value!==void 0&&(be.value=l[0][l[10]].value),k=new Dt({props:be}),Tt.push(()=>Nt(k,"value",Ee));function ie(h){l[32](h)}let pe={style:"flex:1;"};l[0][l[10]].color!==void 0&&(pe.value=l[0][l[10]].color),P=new Dt({props:pe}),Tt.push(()=>Nt(P,"value",ie));let ee=navigator.clipboard&&dl(l);return{c(){e=p("div"),t=p("div"),De(o.$$.fragment),r=B();for(let h=0;h<J.length;h+=1)J[h].c();n=B();for(let h=0;h<L.length;h+=1)L[h].c();i=B(),s=p("div"),u=p("div"),a=p("p"),v=U("Name:"),c=B(),De(k.$$.fragment),j=B(),I=p("div"),W=p("p"),K=U("Color:"),T=B(),De(P.$$.fragment),Y=B(),R=p("div"),ee&&ee.c(),this.h()},l(h){e=m(h,"DIV",{style:!0});var D=g(e);t=m(D,"DIV",{style:!0});var G=g(t);Ve(o.$$.fragment,G),G.forEach(_),r=C(D);for(let ne=0;ne<J.length;ne+=1)J[ne].l(D);n=C(D);for(let ne=0;ne<L.length;ne+=1)L[ne].l(D);D.forEach(_),i=C(h),s=m(h,"DIV",{class:!0});var te=g(s);u=m(te,"DIV",{style:!0,class:!0});var y=g(u);a=m(y,"P",{style:!0,class:!0});var d=g(a);v=S(d,"Name:"),d.forEach(_),c=C(y),Ve(k.$$.fragment,y),y.forEach(_),j=C(te),I=m(te,"DIV",{style:!0,class:!0});var q=g(I);W=m(q,"P",{style:!0,class:!0});var Q=g(W);K=S(Q,"Color:"),Q.forEach(_),T=C(q),Ve(P.$$.fragment,q),q.forEach(_),Y=C(te),R=m(te,"DIV",{class:!0});var me=g(R);ee&&ee.l(me),me.forEach(_),te.forEach(_),this.h()},h(){N(t,"width","0"),N(t,"height","0"),N(e,"flex","1"),N(e,"justify-content","center"),N(e,"display","flex"),N(e,"align-items","center"),N(e,"min-width","750px"),N(e,"min-height","750px"),N(a,"flex","1"),O(a,"class","svelte-4k8o2m"),N(u,"display","flex"),N(u,"justify-content","space-between"),N(u,"border-bottom","1px solid #555"),O(u,"class","svelte-4k8o2m"),N(W,"flex","1"),O(W,"class","svelte-4k8o2m"),N(I,"display","flex"),N(I,"justify-content","space-between"),N(I,"border-bottom","1px solid #555"),O(I,"class","svelte-4k8o2m"),O(R,"class","svelte-4k8o2m"),O(s,"class","properties svelte-4k8o2m")},m(h,D){V(h,e,D),f(e,t),Ue(o,t,null),f(e,r);for(let G=0;G<J.length;G+=1)J[G].m(e,null);f(e,n);for(let G=0;G<L.length;G+=1)L[G].m(e,null);V(h,i,D),V(h,s,D),f(s,u),f(u,a),f(a,v),f(u,c),Ue(k,u,null),f(s,j),f(s,I),f(I,W),f(W,K),f(I,T),Ue(P,I,null),f(s,Y),f(s,R),ee&&ee.m(R,null),X=!0},p(h,D){const G={};if(D[0]&1025&&(G.rule=h[0][h[10]]),o.$set(G),D[0]&5129){re=h[0][h[10]].connectors;let d;for(d=0;d<re.length;d+=1){const q=St(h,re,d);J[d]?J[d].p(q,D):(J[d]=zt(q),J[d].c(),J[d].m(e,n))}for(;d<J.length;d+=1)J[d].d(1);J.length=re.length}if(D[0]&13313){oe=h[0][h[10]].connectors;let d;for(d=0;d<oe.length;d+=1){const q=Vt(h,oe,d);L[d]?(L[d].p(q,D),$(L[d],1)):(L[d]=qt(q),L[d].c(),$(L[d],1),L[d].m(e,null))}for(qe(),d=oe.length;d<L.length;d+=1)de(d);He()}const te={};!b&&D[0]&1025&&(b=!0,te.value=h[0][h[10]].value,wt(()=>b=!1)),k.$set(te);const y={};!A&&D[0]&1025&&(A=!0,y.value=h[0][h[10]].color,wt(()=>A=!1)),P.$set(y),navigator.clipboard&&ee.p(h,D)},i(h){if(!X){$(o.$$.fragment,h);for(let D=0;D<oe.length;D+=1)$(L[D]);$(k.$$.fragment,h),$(P.$$.fragment,h),X=!0}},o(h){se(o.$$.fragment,h),L=L.filter(Boolean);for(let D=0;D<L.length;D+=1)se(L[D]);se(k.$$.fragment,h),se(P.$$.fragment,h),X=!1},d(h){h&&_(e),Se(o),Ie(J,h),Ie(L,h),h&&_(i),h&&_(s),Se(k),Se(P),ee&&ee.d()}}}function At(l){let e,t=l[42]+"",o,r;return{c(){e=p("option"),o=U(t),this.h()},l(n){e=m(n,"OPTION",{});var i=g(e);o=S(i,t),i.forEach(_),this.h()},h(){e.__value=r=l[42],e.value=e.__value},m(n,i){V(n,e,i),f(e,o)},p(n,i){i[0]&8&&t!==(t=n[42]+"")&&Fe(o,t),i[0]&8&&r!==(r=n[42])&&(e.__value=r,e.value=e.__value)},d(n){n&&_(e)}}}function Jt(l){let e,t,o,r,n,i=l[3],s=[];for(let a=0;a<i.length;a+=1)s[a]=At(Ct(l,i,a));function u(){l[28].call(e,l[43],l[44])}return{c(){e=p("select"),t=p("option"),o=U("[delete]");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=m(a,"SELECT",{});var v=g(e);t=m(v,"OPTION",{});var c=g(t);o=S(c,"[delete]"),c.forEach(_);for(let k=0;k<s.length;k+=1)s[k].l(v);v.forEach(_),this.h()},h(){t.__value="null",t.value=t.__value,l[42]===void 0&&Wt(u)},m(a,v){V(a,e,v),f(e,t),f(t,o);for(let c=0;c<s.length;c+=1)s[c].m(e,null);ze(e,l[42]),r||(n=H(e,"change",u),r=!0)},p(a,v){if(l=a,v[0]&8){i=l[3];let c;for(c=0;c<i.length;c+=1){const k=Ct(l,i,c);s[c]?s[c].p(k,v):(s[c]=At(k),s[c].c(),s[c].m(e,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=i.length}v[0]&1033&&ze(e,l[42])},d(a){a&&_(e),Ie(s,a),r=!1,n()}}}function zt(l){let e,t,o,r,n,i,s,u=l[35],a=[];for(let c=0;c<u.length;c+=1)a[c]=Jt(Bt(l,u,c));function v(){return l[29](l[35],l[41],l[37])}return{c(){e=p("div"),t=p("div");for(let c=0;c<a.length;c+=1)a[c].c();o=B(),r=p("button"),n=U("+"),this.h()},l(c){e=m(c,"DIV",{class:!0,style:!0});var k=g(e);t=m(k,"DIV",{class:!0});var b=g(t);for(let I=0;I<a.length;I+=1)a[I].l(b);o=C(b),r=m(b,"BUTTON",{});var j=g(r);n=S(j,"+"),j.forEach(_),b.forEach(_),k.forEach(_),this.h()},h(){O(t,"class","connector-content svelte-4k8o2m"),O(e,"class","connector svelte-4k8o2m"),N(e,"transform",l[12][l[37]])},m(c,k){V(c,e,k),f(e,t);for(let b=0;b<a.length;b+=1)a[b].m(t,null);f(t,o),f(t,r),f(r,n),i||(s=H(r,"click",v),i=!0)},p(c,k){if(l=c,k[0]&1033){u=l[35];let b;for(b=0;b<u.length;b+=1){const j=Bt(l,u,b);a[b]?a[b].p(j,k):(a[b]=Jt(j),a[b].c(),a[b].m(t,o))}for(;b<a.length;b+=1)a[b].d(1);a.length=u.length}},d(c){c&&_(e),Ie(a,c),i=!1,s()}}}function Ht(l){let e,t;return e=new tt({props:{rule:l[38]}}),{c(){De(e.$$.fragment)},l(o){Ve(e.$$.fragment,o)},m(o,r){Ue(e,o,r),t=!0},p(o,r){const n={};r[0]&1025&&(n.rule=o[38]),e.$set(n)},i(o){t||($(e.$$.fragment,o),t=!0)},o(o){se(e.$$.fragment,o),t=!1},d(o){Se(e,o)}}}function qt(l){let e,t,o,r;function n(...a){return l[30](l[37],l[35],...a)}let i=l[0].filter(n),s=[];for(let a=0;a<i.length;a+=1)s[a]=Ht(Ut(l,i,a));const u=a=>se(s[a],1,1,()=>{s[a]=null});return{c(){e=p("div"),t=p("div");for(let a=0;a<s.length;a+=1)s[a].c();o=B(),this.h()},l(a){e=m(a,"DIV",{class:!0,style:!0});var v=g(e);t=m(v,"DIV",{class:!0});var c=g(t);for(let k=0;k<s.length;k+=1)s[k].l(c);c.forEach(_),o=C(v),v.forEach(_),this.h()},h(){O(t,"class","possible-content svelte-4k8o2m"),O(e,"class","possible svelte-4k8o2m"),N(e,"transform",l[12][l[37]])},m(a,v){V(a,e,v),f(e,t);for(let c=0;c<s.length;c+=1)s[c].m(t,null);f(e,o),r=!0},p(a,v){if(l=a,v[0]&9217){i=l[0].filter(n);let c;for(c=0;c<i.length;c+=1){const k=Ut(l,i,c);s[c]?(s[c].p(k,v),$(s[c],1)):(s[c]=Ht(k),s[c].c(),$(s[c],1),s[c].m(t,null))}for(qe(),c=i.length;c<s.length;c+=1)u(c);He()}},i(a){if(!r){for(let v=0;v<i.length;v+=1)$(s[v]);r=!0}},o(a){s=s.filter(Boolean);for(let v=0;v<s.length;v+=1)se(s[v]);r=!1},d(a){a&&_(e),Ie(s,a)}}}function dl(l){let e,t,o,r;return{c(){e=p("button"),t=U("Copy JSON"),this.h()},l(n){e=m(n,"BUTTON",{class:!0});var i=g(e);t=S(i,"Copy JSON"),i.forEach(_),this.h()},h(){O(e,"class","svelte-4k8o2m")},m(n,i){V(n,e,i),f(e,t),o||(r=H(e,"click",l[33]),o=!0)},p:he,d(n){n&&_(e),o=!1,r()}}}function pl(l){let e,t,o,r,n,i,s,u,a,v,c,k,b,j,I,W,K,T,P,A,Y,R,X,re,J,oe,L,de,Ee,be,ie,pe,ee,h,D,G,te,y,d,q,Q,me,ne,ye,Ge,Ke,ve,Be,ae,Z,Qe,ue,Ye,Xe,Te,ce,fe,Ce,Ze,lt;function ot(E,M){return E[8]?fl:cl}let Re=ot(l),_e=Re(l),Ne=l[0],F=[];for(let E=0;E<Ne.length;E+=1)F[E]=jt(Lt(l,Ne,E));const Kt=E=>se(F[E],1,1,()=>{F[E]=null});let Oe=l[3],x=[];for(let E=0;E<Oe.length;E+=1)x[E]=Mt(Rt(l,Oe,E));const nt=[hl,_l],ge=[];function st(E,M){return E[10]!=null&&E[0]!=null&&E[0]!=[]?0:1}return ce=st(l),fe=ge[ce]=nt[ce](l),{c(){e=p("main"),t=p("div"),o=p("div"),r=p("select"),n=p("option"),i=U("Dungeon"),s=p("option"),u=U("Minecraft"),a=p("option"),v=U("Checkers"),c=p("option"),k=U("Layers"),b=p("option"),j=U("Flowers"),I=p("option"),W=U("Stripes"),K=p("option"),T=U("Houses"),P=B(),A=p("div"),Y=B(),R=p("button"),X=U("new"),re=B(),J=p("button"),oe=U("export"),L=B(),de=p("button"),Ee=U("import"),be=B(),ie=p("details"),pe=p("summary"),ee=U("Extract from image"),h=B(),_e.c(),D=B(),G=p("h3"),te=U("Tiles"),y=B(),d=p("div");for(let E=0;E<F.length;E+=1)F[E].c();q=B(),Q=p("button"),me=U("+"),ne=B(),ye=p("h3"),Ge=U("Connectors"),Ke=B(),ve=p("div");for(let E=0;E<x.length;E+=1)x[E].c();Be=B(),ae=p("div"),Z=p("input"),Qe=B(),ue=p("button"),Ye=U("+"),Xe=B(),Te=p("div"),fe.c(),this.h()},l(E){e=m(E,"MAIN",{class:!0});var M=g(e);t=m(M,"DIV",{class:!0});var z=g(t);o=m(z,"DIV",{style:!0});var w=g(o);r=m(w,"SELECT",{});var le=g(r);n=m(le,"OPTION",{});var rt=g(n);i=S(rt,"Dungeon"),rt.forEach(_),s=m(le,"OPTION",{});var it=g(s);u=S(it,"Minecraft"),it.forEach(_),a=m(le,"OPTION",{});var at=g(a);v=S(at,"Checkers"),at.forEach(_),c=m(le,"OPTION",{});var ut=g(c);k=S(ut,"Layers"),ut.forEach(_),b=m(le,"OPTION",{});var ct=g(b);j=S(ct,"Flowers"),ct.forEach(_),I=m(le,"OPTION",{});var ft=g(I);W=S(ft,"Stripes"),ft.forEach(_),K=m(le,"OPTION",{});var _t=g(K);T=S(_t,"Houses"),_t.forEach(_),le.forEach(_),P=C(w),A=m(w,"DIV",{}),g(A).forEach(_),Y=C(w),R=m(w,"BUTTON",{});var ht=g(R);X=S(ht,"new"),ht.forEach(_),re=C(w),J=m(w,"BUTTON",{});var dt=g(J);oe=S(dt,"export"),dt.forEach(_),L=C(w),de=m(w,"BUTTON",{});var pt=g(de);Ee=S(pt,"import"),pt.forEach(_),w.forEach(_),be=C(z),ie=m(z,"DETAILS",{});var Le=g(ie);pe=m(Le,"SUMMARY",{});var mt=g(pe);ee=S(mt,"Extract from image"),mt.forEach(_),h=C(Le),_e.l(Le),Le.forEach(_),D=C(z),G=m(z,"H3",{style:!0});var vt=g(G);te=S(vt,"Tiles"),vt.forEach(_),y=C(z),d=m(z,"DIV",{class:!0});var je=g(d);for(let we=0;we<F.length;we+=1)F[we].l(je);q=C(je),Q=m(je,"BUTTON",{class:!0});var bt=g(Q);me=S(bt,"+"),bt.forEach(_),je.forEach(_),ne=C(z),ye=m(z,"H3",{});var gt=g(ye);Ge=S(gt,"Connectors"),gt.forEach(_),Ke=C(z),ve=m(z,"DIV",{class:!0});var Me=g(ve);for(let we=0;we<x.length;we+=1)x[we].l(Me);Be=C(Me),ae=m(Me,"DIV",{style:!0});var Ae=g(ae);Z=m(Ae,"INPUT",{style:!0}),Qe=C(Ae),ue=m(Ae,"BUTTON",{style:!0});var kt=g(ue);Ye=S(kt,"+"),kt.forEach(_),Ae.forEach(_),Me.forEach(_),z.forEach(_),Xe=C(M),Te=m(M,"DIV",{class:!0});var Et=g(Te);fe.l(Et),Et.forEach(_),M.forEach(_),this.h()},h(){n.__value="5",n.value=n.__value,s.__value="0",s.value=s.__value,a.__value="1",a.value=a.__value,c.__value="2",c.value=c.__value,b.__value="3",b.value=b.__value,I.__value="6",I.value=I.__value,K.__value="7",K.value=K.__value,l[2]===void 0&&Wt(()=>l[21].call(r)),N(o,"display","flex"),N(o,"gap",".25em"),N(o,"flex-wrap","wrap"),N(G,"margin-block","0"),O(Q,"class","add-tile svelte-4k8o2m"),O(d,"class","selection svelte-4k8o2m"),N(Z,"height","2em"),N(Z,"width","8em"),N(Z,"border","none"),N(Z,"background-color","#191919"),N(Z,"padding-top","0px"),N(Z,"padding-bottom","0px"),N(Z,"outline","none"),N(Z,"font-size","1em"),N(Z,"padding-left",".5em"),N(ue,"height","2em"),N(ue,"box-sizing","content-box"),N(ue,"border","none"),N(ue,"padding-top","0px"),N(ue,"padding-bottom","0px"),N(ue,"font-size","1em"),N(ae,"display","flex"),N(ae,"background-color","#191919"),N(ae,"border","1px solid #2d2c2d"),N(ae,"border-radius",".25rem"),N(ae,"overflow","hidden"),O(ve,"class","available-connectors svelte-4k8o2m"),O(t,"class","browser svelte-4k8o2m"),O(Te,"class","editor svelte-4k8o2m"),O(e,"class","svelte-4k8o2m")},m(E,M){V(E,e,M),f(e,t),f(t,o),f(o,r),f(r,n),f(n,i),f(r,s),f(s,u),f(r,a),f(a,v),f(r,c),f(c,k),f(r,b),f(b,j),f(r,I),f(I,W),f(r,K),f(K,T),ze(r,l[2]),f(o,P),f(o,A),f(o,Y),f(o,R),f(R,X),f(o,re),f(o,J),f(J,oe),f(o,L),f(o,de),f(de,Ee),f(t,be),f(t,ie),f(ie,pe),f(pe,ee),f(ie,h),_e.m(ie,null),f(t,D),f(t,G),f(G,te),f(t,y),f(t,d);for(let z=0;z<F.length;z+=1)F[z].m(d,null);f(d,q),f(d,Q),f(Q,me),f(t,ne),f(t,ye),f(ye,Ge),f(t,Ke),f(t,ve);for(let z=0;z<x.length;z+=1)x[z].m(ve,null);f(ve,Be),f(ve,ae),f(ae,Z),Pe(Z,l[11]),f(ae,Qe),f(ae,ue),f(ue,Ye),f(e,Xe),f(e,Te),ge[ce].m(Te,null),Ce=!0,Ze||(lt=[H(r,"change",l[21]),H(R,"click",l[14]),H(J,"click",l[15]),H(de,"click",l[16]),H(Q,"click",l[17]),H(Z,"input",l[27]),H(ue,"click",l[19]),H(e,"mouseover",l[34]),H(e,"focus",vl)],Ze=!0)},p(E,M){if(M[0]&4&&ze(r,E[2]),Re===(Re=ot(E))&&_e?_e.p(E,M):(_e.d(1),_e=Re(E),_e&&(_e.c(),_e.m(ie,null))),M[0]&1537){Ne=E[0];let w;for(w=0;w<Ne.length;w+=1){const le=Lt(E,Ne,w);F[w]?(F[w].p(le,M),$(F[w],1)):(F[w]=jt(le),F[w].c(),$(F[w],1),F[w].m(d,q))}for(qe(),w=Ne.length;w<F.length;w+=1)Kt(w);He()}if(M[0]&262154){Oe=E[3];let w;for(w=0;w<Oe.length;w+=1){const le=Rt(E,Oe,w);x[w]?x[w].p(le,M):(x[w]=Mt(le),x[w].c(),x[w].m(ve,Be))}for(;w<x.length;w+=1)x[w].d(1);x.length=Oe.length}M[0]&2048&&Z.value!==E[11]&&Pe(Z,E[11]);let z=ce;ce=st(E),ce===z?ge[ce].p(E,M):(qe(),se(ge[z],1,1,()=>{ge[z]=null}),He(),fe=ge[ce],fe?fe.p(E,M):(fe=ge[ce]=nt[ce](E),fe.c()),$(fe,1),fe.m(Te,null))},i(E){if(!Ce){for(let M=0;M<Ne.length;M+=1)$(F[M]);$(fe),Ce=!0}},o(E){F=F.filter(Boolean);for(let M=0;M<F.length;M+=1)se(F[M]);se(fe),Ce=!1},d(E){E&&_(e),_e.d(),Ie(F,E),Ie(x,E),ge[ce].d(),Ze=!1,We(lt)}}}const ml=()=>{},vl=()=>{};function bl(l,e,t){const o=["translate( 0,  var(--sm))","translate(var(--sm), 0px)","translate( 0,   var(--s))","translate( var(--s), 0px)"],r={0:2,1:3,2:0,3:1};let n=It,i=[],s=[];function u(){t(0,n=[])}function a(){let y=JSON.stringify(n);console.info(y),alert(y)}function v(){let y=prompt("Paste rules here:");if(y!=null)try{let d=JSON.parse(y);t(0,n=d)}catch(d){alert("Error parsing rules: "+d)}}function c(){let y=prompt("Tile name");if(y==null)return;let d=prompt("Tile color");d!=null&&(n.push({value:y,color:d,connectors:[[],[],[],[]]}),t(0,n),t(2,A))}function k(y){for(let d of n)d.connectors=d.connectors.map(q=>q.filter(Q=>Q!==y));t(0,n),t(2,A)}function b(){X!=null&&X!==""&&(t(3,i=[...i,X]),console.log("Added new connector",X),t(11,X=null))}let j,I=0,W="",K=3;function T(){t(5,I=0),t(6,W="");let y=j[0];if(y!=null){t(5,I=5),t(6,W="Reading image...");let d=new FileReader;d.readAsDataURL(y),d.onload=async q=>{var me;let Q=(me=q.target)==null?void 0:me.result;if(Q){console.log(Q),t(5,I=25),t(6,W="Extracting features..."),await new Promise(ye=>setTimeout(ye,500));let ne=ll(Q,K);t(5,I=75),t(6,W="Parsing results..."),t(0,n=JSON.parse(ne)),t(5,I=100),t(6,W="Rules extracted.")}}}}let P=!1;Ft(()=>{Qt().then(()=>{t(8,P=!0)})});let A="5",Y,R,X;function re(){A=yt(this),t(2,A)}function J(){j=this.files,t(4,j)}function oe(){K=Gt(this.value),t(7,K)}const L=y=>{t(10,R=y),t(9,Y=y)},de=(y,d)=>{t(10,R=y),d.preventDefault(),d.stopPropagation()},Ee=y=>{k(y)};function be(){X=this.value,t(11,X)}function ie(y,d){y[d]=yt(this),t(0,n),t(2,A),t(10,R),t(2,A),t(3,i),t(0,n),t(1,s),t(2,A)}const pe=(y,d,q)=>{y.push(i.length>0?i[0]:"new connector"),t(0,d[q]=y,n,(t(10,R),t(2,A)))},ee=(y,d,q)=>q.connectors[r[y]].filter(Q=>d.includes(Q)).length>0;function h(y){l.$$.not_equal(n[R].value,y)&&(n[R].value=y,t(0,n),t(2,A))}function D(y){l.$$.not_equal(n[R].color,y)&&(n[R].color=y,t(0,n),t(2,A))}const G=()=>{navigator.clipboard.writeText(JSON.stringify(n[R],null,4))},te=()=>{t(10,R=Y)};return l.$$.update=()=>{l.$$.dirty[0]&4&&A!=null&&(t(0,n=[Yt,Xt,Zt,xt,$t,It,el,tl][+A]),t(9,Y=null),t(10,R=null)),l.$$.dirty[0]&3&&n!=null&&(k("null"),t(1,s=[...new Set(n.map(y=>y.connectors.flat()).flat())]),t(3,i=[...s]))},[n,s,A,i,j,I,W,K,P,Y,R,X,o,r,u,a,v,c,k,b,T,re,J,oe,L,de,Ee,be,ie,pe,ee,h,D,G,te]}class El extends xe{constructor(e){super(),$e(this,e,bl,pl,et,{},null,[-1,-1])}}export{El as default};
