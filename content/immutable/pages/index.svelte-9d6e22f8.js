import{S as Vl,i as Rl,s as Ul,e as h,t as b,c as u,a as v,h as w,d as c,b as n,g as Y,J as r,j as De,f as A,k as E,m as k,K as G,l as yl,L as ll,M as Ml,N as Bl,O as Jl,P as bl,Q as pe,R as el,n as wl,w as jl,T as Cl}from"../chunks/index-be5dee29.js";import{i as Gl,m as El,c as Yl,d as ql,f as Fl,p as Hl,a as Kl,r as Ql,b as Xl,e as Wl,g as Zl,h as kl}from"../chunks/@vite-plugin-wasm-pack@aalto2-32796f27.js";function Sl(i,l,e){const t=i.slice();return t[27]=l[e],t[29]=e,t}function Il(i,l,e){const t=i.slice();return t[30]=l[e],t[32]=e,t}function Tl(i,l,e){const t=i.slice();return t[33]=l[e],t}function Al(i){let l,e;return{c(){l=h("p"),e=b(i[8]),this.h()},l(t){l=u(t,"P",{class:!0});var s=v(l);e=w(s,i[8]),s.forEach(c),this.h()},h(){n(l,"class","svelte-1ihwriy")},m(t,s){Y(t,l,s),r(l,e)},p(t,s){s[0]&256&&De(e,t[8])},d(t){t&&c(l)}}}function Ll(i){let l;function e(a,o){return a[5]?$l:xl}let t=e(i),s=t(i);return{c(){l=h("div"),s.c(),this.h()},l(a){l=u(a,"DIV",{style:!0,class:!0});var o=v(l);s.l(o),o.forEach(c),this.h()},h(){A(l,"height","100%"),A(l,"width","100%"),A(l,"display","grid"),A(l,"place-items","center"),n(l,"class","svelte-1ihwriy")},m(a,o){Y(a,l,o),s.m(l,null)},p(a,o){t!==(t=e(a))&&(s.d(1),s=t(a),s&&(s.c(),s.m(l,null)))},d(a){a&&c(l),s.d()}}}function xl(i){let l,e;return{c(){l=h("p"),e=b("Loading wasm..."),this.h()},l(t){l=u(t,"P",{class:!0});var s=v(l);e=w(s,"Loading wasm..."),s.forEach(c),this.h()},h(){n(l,"class","svelte-1ihwriy")},m(t,s){Y(t,l,s),r(l,e)},d(t){t&&c(l)}}}function $l(i){let l,e,t,s;return{c(){l=h("p"),e=b("Error while executing wasm. "),t=h("br"),s=b(`
                        Are the rules valid?`),this.h()},l(a){l=u(a,"P",{class:!0});var o=v(l);e=w(o,"Error while executing wasm. "),t=u(o,"BR",{class:!0}),s=w(o,`
                        Are the rules valid?`),o.forEach(c),this.h()},h(){n(t,"class","svelte-1ihwriy"),n(l,"class","svelte-1ihwriy")},m(a,o){Y(a,l,o),r(l,e),r(l,t),r(l,s)},d(a){a&&c(l)}}}function Ol(i){let l,e=i[30].possible.length!=1&&Nl(i);return{c(){l=h("div"),e&&e.c(),this.h()},l(t){l=u(t,"DIV",{class:!0});var s=v(l);e&&e.l(s),s.forEach(c),this.h()},h(){n(l,"class","possibilities svelte-1ihwriy")},m(t,s){Y(t,l,s),e&&e.m(l,null)},p(t,s){t[30].possible.length!=1?e?e.p(t,s):(e=Nl(t),e.c(),e.m(l,null)):e&&(e.d(1),e=null)},d(t){t&&c(l),e&&e.d()}}}function Nl(i){let l,e=i[30].possible,t=[];for(let s=0;s<e.length;s+=1)t[s]=Dl(Tl(i,e,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();l=yl()},l(s){for(let a=0;a<t.length;a+=1)t[a].l(s);l=yl()},m(s,a){for(let o=0;o<t.length;o+=1)t[o].m(s,a);Y(s,l,a)},p(s,a){if(a[0]&16){e=s[30].possible;let o;for(o=0;o<e.length;o+=1){const _=Tl(s,e,o);t[o]?t[o].p(_,a):(t[o]=Dl(_),t[o].c(),t[o].m(l.parentNode,l))}for(;o<t.length;o+=1)t[o].d(1);t.length=e.length}},d(s){ll(t,s),s&&c(l)}}}function Dl(i){let l;return{c(){l=h("div"),this.h()},l(e){l=u(e,"DIV",{class:!0,style:!0}),v(l).forEach(c),this.h()},h(){n(l,"class","possible svelte-1ihwriy"),A(l,"--color",i[33].color),A(l,"--opacity",1/i[30].possible.length)},m(e,t){Y(e,l,t)},p(e,t){t[0]&16&&A(l,"--color",e[33].color),t[0]&16&&A(l,"--opacity",1/e[30].possible.length)},d(e){e&&c(l)}}}function zl(i){let l,e="",t,s,a,o,_,p=i[6]&&Ol(i);function Q(){return i[16](i[32],i[29])}function te(...L){return i[17](i[32],i[29],...L)}return{c(){l=h("div"),t=b(e),s=E(),a=E(),p&&p.c(),this.h()},l(L){l=u(L,"DIV",{class:!0,title:!0,style:!0});var g=v(l);t=w(g,e),s=k(g),a=k(g),p&&p.l(g),g.forEach(c),this.h()},h(){n(l,"class","tile svelte-1ihwriy"),n(l,"title",`${i[32]}, ${i[29]}`),A(l,"--bg",i[30].possible.length==1?i[30].possible[0].color:"transparent")},m(L,g){Y(L,l,g),r(l,t),r(l,s),r(l,a),p&&p.m(l,null),o||(_=[G(l,"click",Q),G(l,"mouseover",te),G(l,"focus",null)],o=!0)},p(L,g){i=L,g[0]&16&&e!==(e="")&&De(t,e),i[6]?p?p.p(i,g):(p=Ol(i),p.c(),p.m(l,null)):p&&(p.d(1),p=null),g[0]&16&&A(l,"--bg",i[30].possible.length==1?i[30].possible[0].color:"transparent")},d(L){L&&c(l),p&&p.d(),o=!1,Ml(_)}}}function Pl(i){let l,e,t=i[27],s=[];for(let a=0;a<t.length;a+=1)s[a]=zl(Il(i,t,a));return{c(){l=h("div");for(let a=0;a<s.length;a+=1)s[a].c();e=E(),this.h()},l(a){l=u(a,"DIV",{class:!0});var o=v(l);for(let _=0;_<s.length;_+=1)s[_].l(o);e=k(o),o.forEach(c),this.h()},h(){n(l,"class","col svelte-1ihwriy")},m(a,o){Y(a,l,o);for(let _=0;_<s.length;_+=1)s[_].m(l,null);r(l,e)},p(a,o){if(o[0]&2128){t=a[27];let _;for(_=0;_<t.length;_+=1){const p=Il(a,t,_);s[_]?s[_].p(p,o):(s[_]=zl(p),s[_].c(),s[_].m(l,e))}for(;_<s.length;_+=1)s[_].d(1);s.length=t.length}},d(a){a&&c(l),ll(s,a)}}}function et(i){let l,e,t,s,a,o,_,p,Q,te,L,g,S,I,R,T,se,O,q,B,ie,M,me,ge,J,W,ye,be,V,y,m,j,re,F,ae,ze,Pe,H,Me,Z,he,Ve,Re,x,oe,Ue,Be,X,Je,K,ue,je,Ce,C,ne,Ge,Ye,U,qe,ke,Fe,He,fe,Ke,Qe,$,ee,we=i[7]?"Stop":"Solve",Se,Xe,le,We,Ze,tl,N=i[8]!=null&&Al(i),D=(!i[4]||i[4].length==0)&&Ll(i),de=i[4],z=[];for(let f=0;f<de.length;f+=1)z[f]=Pl(Sl(i,de,f));return{c(){l=E(),e=h("main"),t=h("h1"),s=b("AALTO"),a=E(),o=h("p"),_=b("made by "),p=h("a"),Q=b("elias eskelinen"),te=E(),N&&N.c(),L=E(),g=h("div"),S=h("select"),I=h("option"),R=b("Dungeon"),T=h("option"),se=b("Minecraft"),O=h("option"),q=b("Checkers"),B=h("option"),ie=b("Layers"),M=h("option"),me=b("Flowers"),ge=E(),J=h("details"),W=h("summary"),ye=b("Edit the rules"),be=E(),V=h("textarea"),y=E(),m=h("div"),D&&D.c(),j=E();for(let f=0;f<z.length;f+=1)z[f].c();re=E(),F=h("div"),ae=h("label"),ze=b("Grid size:"),Pe=E(),H=h("input"),Me=E(),Z=h("details"),he=h("summary"),Ve=b("Performance"),Re=E(),x=h("div"),oe=h("label"),Ue=b("Show possible:"),Be=E(),X=h("input"),Je=E(),K=h("details"),ue=h("summary"),je=b("Solving"),Ce=E(),C=h("div"),ne=h("label"),Ge=b("Solve delay:"),Ye=E(),U=h("input"),qe=E(),ke=b(i[3]),Fe=b(" ms"),He=E(),fe=h("small"),Ke=b("set delay to 0 for maximum speed"),Qe=E(),$=h("div"),ee=h("button"),Se=b(we),Xe=E(),le=h("button"),We=b("Reset"),this.h()},l(f){Bl('[data-svelte="svelte-bf8aw6"]',document.head).forEach(c),l=k(f),e=u(f,"MAIN",{class:!0});var d=v(e);t=u(d,"H1",{class:!0});var Ee=v(t);s=w(Ee,"AALTO"),Ee.forEach(c),a=k(d),o=u(d,"P",{class:!0});var xe=v(o);_=w(xe,"made by "),p=u(xe,"A",{href:!0,class:!0});var sl=v(p);Q=w(sl,"elias eskelinen"),sl.forEach(c),xe.forEach(c),te=k(d),N&&N.l(d),L=k(d),g=u(d,"DIV",{class:!0});var il=v(g);S=u(il,"SELECT",{class:!0});var ve=v(S);I=u(ve,"OPTION",{class:!0});var rl=v(I);R=w(rl,"Dungeon"),rl.forEach(c),T=u(ve,"OPTION",{class:!0});var al=v(T);se=w(al,"Minecraft"),al.forEach(c),O=u(ve,"OPTION",{class:!0});var ol=v(O);q=w(ol,"Checkers"),ol.forEach(c),B=u(ve,"OPTION",{class:!0});var nl=v(B);ie=w(nl,"Layers"),nl.forEach(c),M=u(ve,"OPTION",{class:!0});var cl=v(M);me=w(cl,"Flowers"),cl.forEach(c),ve.forEach(c),il.forEach(c),ge=k(d),J=u(d,"DETAILS",{style:!0,class:!0});var Ie=v(J);W=u(Ie,"SUMMARY",{class:!0});var hl=v(W);ye=w(hl,"Edit the rules"),hl.forEach(c),be=k(Ie),V=u(Ie,"TEXTAREA",{style:!0,class:!0}),v(V).forEach(c),Ie.forEach(c),y=k(d),m=u(d,"DIV",{class:!0,style:!0});var Te=v(m);D&&D.l(Te),j=k(Te);for(let $e=0;$e<z.length;$e+=1)z[$e].l(Te);Te.forEach(c),re=k(d),F=u(d,"DIV",{class:!0});var Ae=v(F);ae=u(Ae,"LABEL",{for:!0,class:!0});var ul=v(ae);ze=w(ul,"Grid size:"),ul.forEach(c),Pe=k(Ae),H=u(Ae,"INPUT",{id:!0,type:!0,class:!0}),Ae.forEach(c),Me=k(d),Z=u(d,"DETAILS",{class:!0});var Le=v(Z);he=u(Le,"SUMMARY",{class:!0});var fl=v(he);Ve=w(fl,"Performance"),fl.forEach(c),Re=k(Le),x=u(Le,"DIV",{class:!0});var Oe=v(x);oe=u(Oe,"LABEL",{for:!0,class:!0});var dl=v(oe);Ue=w(dl,"Show possible:"),dl.forEach(c),Be=k(Oe),X=u(Oe,"INPUT",{id:!0,type:!0,class:!0}),Oe.forEach(c),Le.forEach(c),Je=k(d),K=u(d,"DETAILS",{class:!0});var _e=v(K);ue=u(_e,"SUMMARY",{class:!0});var vl=v(ue);je=w(vl,"Solving"),vl.forEach(c),Ce=k(_e),C=u(_e,"DIV",{class:!0});var ce=v(C);ne=u(ce,"LABEL",{for:!0,class:!0});var _l=v(ne);Ge=w(_l,"Solve delay:"),_l.forEach(c),Ye=k(ce),U=u(ce,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),qe=k(ce),ke=w(ce,i[3]),Fe=w(ce," ms"),ce.forEach(c),He=k(_e),fe=u(_e,"SMALL",{class:!0});var pl=v(fe);Ke=w(pl,"set delay to 0 for maximum speed"),pl.forEach(c),_e.forEach(c),Qe=k(d),$=u(d,"DIV",{class:!0});var Ne=v($);ee=u(Ne,"BUTTON",{style:!0,class:!0});var ml=v(ee);Se=w(ml,we),ml.forEach(c),Xe=k(Ne),le=u(Ne,"BUTTON",{style:!0,class:!0});var gl=v(le);We=w(gl,"Reset"),gl.forEach(c),Ne.forEach(c),d.forEach(c),this.h()},h(){document.title="AALTO",n(t,"class","svelte-1ihwriy"),n(p,"href","https://eliaseskelinen.fi"),n(p,"class","svelte-1ihwriy"),n(o,"class","svelte-1ihwriy"),I.__value="5",I.value=I.__value,n(I,"class","svelte-1ihwriy"),T.__value="0",T.value=T.__value,n(T,"class","svelte-1ihwriy"),O.__value="1",O.value=O.__value,n(O,"class","svelte-1ihwriy"),B.__value="2",B.value=B.__value,n(B,"class","svelte-1ihwriy"),M.__value="3",M.value=M.__value,n(M,"class","svelte-1ihwriy"),n(S,"class","svelte-1ihwriy"),i[1]===void 0&&Jl(()=>i[14].call(S)),n(g,"class","svelte-1ihwriy"),n(W,"class","svelte-1ihwriy"),A(V,"min-width","var(--grid-max-size)"),A(V,"resize","block"),A(V,"min-height","var(--grid-max-size)"),n(V,"class","svelte-1ihwriy"),A(J,"min-width","var(--grid-max-size)"),n(J,"class","svelte-1ihwriy"),n(m,"class","grid svelte-1ihwriy"),A(m,"--size",i[2]),n(ae,"for","width"),n(ae,"class","svelte-1ihwriy"),n(H,"id","width"),n(H,"type","number"),n(H,"class","svelte-1ihwriy"),n(F,"class","svelte-1ihwriy"),n(he,"class","svelte-1ihwriy"),n(oe,"for","show-possible"),n(oe,"class","svelte-1ihwriy"),n(X,"id","show-possible"),n(X,"type","checkbox"),n(X,"class","svelte-1ihwriy"),n(x,"class","svelte-1ihwriy"),n(Z,"class","svelte-1ihwriy"),n(ue,"class","svelte-1ihwriy"),n(ne,"for","speed"),n(ne,"class","svelte-1ihwriy"),n(U,"id","speed"),n(U,"type","range"),n(U,"min","0"),n(U,"max","75"),n(U,"class","svelte-1ihwriy"),n(C,"class","svelte-1ihwriy"),n(fe,"class","svelte-1ihwriy"),n(K,"class","svelte-1ihwriy"),A(ee,"padding","0.25em 1em"),n(ee,"class","svelte-1ihwriy"),A(le,"padding","0.25em 1em"),n(le,"class","svelte-1ihwriy"),n($,"class","svelte-1ihwriy"),n(e,"class","svelte-1ihwriy")},m(f,P){Y(f,l,P),Y(f,e,P),r(e,t),r(t,s),r(e,a),r(e,o),r(o,_),r(o,p),r(p,Q),r(e,te),N&&N.m(e,null),r(e,L),r(e,g),r(g,S),r(S,I),r(I,R),r(S,T),r(T,se),r(S,O),r(O,q),r(S,B),r(B,ie),r(S,M),r(M,me),bl(S,i[1]),r(e,ge),r(e,J),r(J,W),r(W,ye),r(J,be),r(J,V),pe(V,i[0]),r(e,y),r(e,m),D&&D.m(m,null),r(m,j);for(let d=0;d<z.length;d+=1)z[d].m(m,null);r(e,re),r(e,F),r(F,ae),r(ae,ze),r(F,Pe),r(F,H),pe(H,i[2]),r(e,Me),r(e,Z),r(Z,he),r(he,Ve),r(Z,Re),r(Z,x),r(x,oe),r(oe,Ue),r(x,Be),r(x,X),X.checked=i[6],r(e,Je),r(e,K),r(K,ue),r(ue,je),r(K,Ce),r(K,C),r(C,ne),r(ne,Ge),r(C,Ye),r(C,U),pe(U,i[3]),r(C,qe),r(C,ke),r(C,Fe),r(K,He),r(K,fe),r(fe,Ke),r(e,Qe),r(e,$),r($,ee),r(ee,Se),r($,Xe),r($,le),r(le,We),Ze||(tl=[G(S,"change",i[14]),G(V,"input",i[15]),G(H,"input",i[18]),G(X,"change",i[19]),G(U,"change",i[20]),G(U,"input",i[20]),G(ee,"click",i[10]),G(le,"click",i[9])],Ze=!0)},p(f,P){if(f[8]!=null?N?N.p(f,P):(N=Al(f),N.c(),N.m(e,L)):N&&(N.d(1),N=null),P[0]&2&&bl(S,f[1]),P[0]&1&&pe(V,f[0]),!f[4]||f[4].length==0?D?D.p(f,P):(D=Ll(f),D.c(),D.m(m,j)):D&&(D.d(1),D=null),P[0]&2128){de=f[4];let d;for(d=0;d<de.length;d+=1){const Ee=Sl(f,de,d);z[d]?z[d].p(Ee,P):(z[d]=Pl(Ee),z[d].c(),z[d].m(m,null))}for(;d<z.length;d+=1)z[d].d(1);z.length=de.length}P[0]&4&&A(m,"--size",f[2]),P[0]&4&&el(H.value)!==f[2]&&pe(H,f[2]),P[0]&64&&(X.checked=f[6]),P[0]&8&&pe(U,f[3]),P[0]&8&&De(ke,f[3]),P[0]&128&&we!==(we=f[7]?"Stop":"Solve")&&De(Se,we)},i:wl,o:wl,d(f){f&&c(l),f&&c(e),N&&N.d(),D&&D.d(),ll(z,f),Ze=!1,Ml(tl)}}}function lt(i,l,e){let t=El,s=32,a=[];function o(){return JSON.stringify({tiles:a})}function _(y){let m=JSON.parse(y);e(4,a=m.tiles)}let p=!1;function Q(){if(!!g){e(7,T=!1);try{let y=Ql(R,R,t),m=JSON.parse(y);e(4,a=m),e(5,p=!1),I==="3"?(s=18,te(R-1,R-1,0)):s=12}catch(y){console.warn(y),e(4,a=[]),e(5,p=!0)}console.info("Max recursion",s)}}function te(y,m,j){let re=a[m][y];re.possible=[re.possible[j]],e(4,a[m][y]=re,a);let F=Xl(o(),y,m,s);_(F)}function L(){if(q==0){T&&O&&clearInterval(O),console.log("Starting solve...");let y=Wl(o(),s);_(y),console.log("Solve done!")}else T?(e(7,T=!1),console.log("Solve stopped!")):(console.log("Starting solve..."),e(7,T=!0))}let g=!1;jl(()=>{Gl().then(()=>{e(12,g=!0)})});let S=!0,I="0",R=16,T=!1,se=!1,O,q=0;function B(){if(T&&!se){se=!0;let y=JSON.parse(Zl(o()));if(y){console.log("Collapsing",y);let m=kl(o(),y[0],y[1],s);_(m)}else e(7,T=!1),console.log("Solve done!");se=!1}}function ie(y,m){if(!g)return;console.log("In",o());let j=kl(o(),y,m,s);_(j)}let M;function me(){I=Cl(this),e(1,I)}function ge(){t=this.value,e(0,t),e(1,I),e(12,g)}const J=(y,m)=>{ie(y,m)},W=(y,m,j)=>{(j.buttons==1||j.buttons==3)&&ie(y,m)};function ye(){R=el(this.value),e(2,R)}function be(){S=this.checked,e(6,S)}function V(){q=el(this.value),e(3,q)}return i.$$.update=()=>{i.$$.dirty[0]&4098&&I!=null&&g&&(e(0,t=[El,Yl,ql,Fl,Hl,Kl][+I]),+I==5?e(8,M="Textures by kenney.nl"):e(8,M=null)),i.$$.dirty[0]&4097&&t&&g&&Q(),i.$$.dirty[0]&4100&&R&&g&&Q(),i.$$.dirty[0]&8200&&q!=null&&(O&&clearInterval(O),e(13,O=setInterval(B,q)))},[t,I,R,q,a,p,S,T,M,Q,L,ie,g,O,me,ge,J,W,ye,be,V]}class it extends Vl{constructor(l){super(),Rl(this,l,lt,et,Ul,{},null,[-1,-1])}}export{it as default};
