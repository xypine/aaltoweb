import{S as et,i as tt,s as lt,l as d,m as p,p as b,h as _,q as P,b as B,n as he,o as Kt,u as U,a as C,e as ze,v as S,c as R,J as f,K as z,w as We,L as Oe,M as Ge,N as be,O as Qt,r as N,P as He,f as te,d as qe,t as re,Q as we,x as Ve,y as Ue,z as Se,C as Be,g as Fe,R as wt,T as Yt,U as It,V as Ot,W as Pt}from"../chunks/index-3a383381.js";import{i as Zt,m as xt,c as $t,d as el,f as tl,p as ll,a as Dt,s as ol,h as nl,b as sl,e as rl}from"../chunks/@vite-plugin-wasm-pack@aalto-93fafea1.js";function il(l){let e,t,o,r,n,i,s=l[1]&&Vt(l);return{c(){e=d("p"),t=U(l[0]),o=C(),s&&s.c(),r=ze(),this.h()},l(u){e=p(u,"P",{class:!0});var a=b(e);t=S(a,l[0]),a.forEach(_),o=R(u),s&&s.l(u),r=ze(),this.h()},h(){P(e,"class","svelte-2l6lj1")},m(u,a){B(u,e,a),f(e,t),B(u,o,a),s&&s.m(u,a),B(u,r,a),n||(i=z(e,"click",l[7]),n=!0)},p(u,a){a&1&&We(t,u[0]),u[1]?s?s.p(u,a):(s=Vt(u),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null)},d(u){u&&_(e),u&&_(o),s&&s.d(u),u&&_(r),n=!1,i()}}}function al(l){let e,t,o,r,n,i=l[1]&&Ut(l);return{c(){e=d("input"),t=C(),i&&i.c(),o=ze(),this.h()},l(s){e=p(s,"INPUT",{class:!0}),t=R(s),i&&i.l(s),o=ze(),this.h()},h(){P(e,"class","svelte-2l6lj1")},m(s,u){B(s,e,u),Oe(e,l[0]),B(s,t,u),i&&i.m(s,u),B(s,o,u),r||(n=[z(e,"click",cl),z(e,"input",l[5])],r=!0)},p(s,u){u&1&&e.value!==s[0]&&Oe(e,s[0]),s[1]?i?i.p(s,u):(i=Ut(s),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},d(s){s&&_(e),s&&_(t),i&&i.d(s),s&&_(o),r=!1,Ge(n)}}}function Vt(l){let e,t,o,r;return{c(){e=d("button"),t=U("edit")},l(n){e=p(n,"BUTTON",{});var i=b(e);t=S(i,"edit"),i.forEach(_)},m(n,i){B(n,e,i),f(e,t),o||(r=z(e,"click",l[8]),o=!0)},p:he,d(n){n&&_(e),o=!1,r()}}}function Ut(l){let e,t,o,r;return{c(){e=d("button"),t=U("done")},l(n){e=p(n,"BUTTON",{});var i=b(e);t=S(i,"done"),i.forEach(_)},m(n,i){B(n,e,i),f(e,t),o||(r=z(e,"click",l[6]),o=!0)},p:he,d(n){n&&_(e),o=!1,r()}}}function ul(l){let e;function t(n,i){return n[3]?al:il}let o=t(l),r=o(l);return{c(){e=d("main"),r.c(),this.h()},l(n){e=p(n,"MAIN",{style:!0,class:!0});var i=b(e);r.l(i),i.forEach(_),this.h()},h(){P(e,"style",l[2]),P(e,"class","svelte-2l6lj1")},m(n,i){B(n,e,i),r.m(e,null)},p(n,[i]){o===(o=t(n))&&r?r.p(n,i):(r.d(1),r=o(n),r&&(r.c(),r.m(e,null))),i&4&&P(e,"style",n[2])},i:he,o:he,d(n){n&&_(e),r.d()}}}const cl=l=>{l.preventDefault(),l.stopPropagation()};function fl(l,e,t){let{value:o}=e,{buttons:r=!1}=e,{style:n=""}=e,i=!1;function s(v){t(3,i=v)}function u(v,j){s(j),v.preventDefault(),v.stopPropagation()}Kt(()=>{window.addEventListener("click",()=>{t(3,i=!1)})});function a(){o=this.value,t(0,o)}const m=v=>{u(v,!1)},c=v=>{u(v,!0)},k=v=>{u(v,!0)};return l.$$set=v=>{"value"in v&&t(0,o=v.value),"buttons"in v&&t(1,r=v.buttons),"style"in v&&t(2,n=v.style)},[o,r,n,i,u,a,m,c,k]}class St extends et{constructor(e){super(),tt(this,e,fl,ul,lt,{value:0,buttons:1,style:2})}}function _l(l){let e,t,o;return{c(){e=d("main"),this.h()},l(r){e=p(r,"MAIN",{style:!0,title:!0,class:!0});var n=b(e);n.forEach(_),this.h()},h(){P(e,"style",t="--bg:"+l[0].color+";"+l[1]),P(e,"title",o=l[0].value),P(e,"class","svelte-14rb7sg"),be(e,"selectable",l[2]),be(e,"selected",l[3]),be(e,"partially-selected",l[4])},m(r,n){B(r,e,n)},p(r,[n]){n&3&&t!==(t="--bg:"+r[0].color+";"+r[1])&&P(e,"style",t),n&1&&o!==(o=r[0].value)&&P(e,"title",o),n&4&&be(e,"selectable",r[2]),n&8&&be(e,"selected",r[3]),n&16&&be(e,"partially-selected",r[4])},i:he,o:he,d(r){r&&_(e)}}}function hl(l,e,t){let{rule:o}=e,{style:r=""}=e,{selectable:n=!1}=e,{selected:i=!1}=e,{partially_selected:s=!1}=e;return l.$$set=u=>{"rule"in u&&t(0,o=u.rule),"style"in u&&t(1,r=u.style),"selectable"in u&&t(2,n=u.selectable),"selected"in u&&t(3,i=u.selected),"partially_selected"in u&&t(4,s=u.partially_selected)},[o,r,n,i,s]}class ot extends et{constructor(e){super(),tt(this,e,hl,_l,lt,{rule:0,style:1,selectable:2,selected:3,partially_selected:4})}}function Bt(l,e,t){const o=l.slice();return o[35]=e[t],o[37]=t,o}function Ct(l,e,t){const o=l.slice();return o[38]=e[t],o}function Rt(l,e,t){const o=l.slice();return o[35]=e[t],o[41]=e,o[37]=t,o}function Lt(l,e,t){const o=l.slice();return o[42]=e[t],o[43]=e,o[44]=t,o}function jt(l,e,t){const o=l.slice();return o[42]=e[t],o}function Mt(l,e,t){const o=l.slice();return o[35]=e[t],o}function At(l,e,t){const o=l.slice();return o[49]=e[t],o[37]=t,o}function dl(l){let e,t;return{c(){e=d("p"),t=U("Waiting for wasm to initialize...")},l(o){e=p(o,"P",{});var r=b(e);t=S(r,"Waiting for wasm to initialize..."),r.forEach(_)},m(o,r){B(o,e,r),f(e,t)},p:he,d(o){o&&_(e)}}}function pl(l){let e,t,o,r,n,i,s,u,a,m,c,k,v,j,O,q,G;return{c(){e=d("input"),t=C(),o=d("label"),r=U("N"),n=C(),i=d("input"),s=C(),u=d("button"),a=U("extract"),m=C(),c=d("div"),k=d("progress"),v=C(),j=d("p"),O=U(l[6]),this.h()},l(T){e=p(T,"INPUT",{type:!0}),t=R(T),o=p(T,"LABEL",{for:!0});var I=b(o);r=S(I,"N"),I.forEach(_),n=R(T),i=p(T,"INPUT",{type:!0,id:!0}),s=R(T),u=p(T,"BUTTON",{});var A=b(u);a=S(A,"extract"),A.forEach(_),m=R(T),c=p(T,"DIV",{});var X=b(c);k=p(X,"PROGRESS",{style:!0,max:!0}),b(k).forEach(_),v=R(X),j=p(X,"P",{});var L=b(j);O=S(L,l[6]),L.forEach(_),X.forEach(_),this.h()},h(){P(e,"type","file"),P(o,"for","extract-N"),P(i,"type","number"),P(i,"id","extract-N"),N(k,"width","100%"),k.value=l[5],P(k,"max",100)},m(T,I){B(T,e,I),B(T,t,I),B(T,o,I),f(o,r),B(T,n,I),B(T,i,I),Oe(i,l[7]),B(T,s,I),B(T,u,I),f(u,a),B(T,m,I),B(T,c,I),f(c,k),f(c,v),f(c,j),f(j,O),q||(G=[z(e,"change",l[22]),z(i,"input",l[23]),z(u,"click",l[20])],q=!0)},p(T,I){I[0]&128&&Yt(i.value)!==T[7]&&Oe(i,T[7]),I[0]&32&&(k.value=T[5]),I[0]&64&&We(O,T[6])},d(T){T&&_(e),T&&_(t),T&&_(o),T&&_(n),T&&_(i),T&&_(s),T&&_(u),T&&_(m),T&&_(c),q=!1,Ge(G)}}}function Jt(l){let e,t,o,r,n;t=new ot({props:{rule:l[49],selectable:!0,selected:l[10]==l[37],partially_selected:l[9]==l[37]&&l[10]!=l[37]}});function i(){return l[24](l[37])}function s(...u){return l[25](l[37],...u)}return{c(){e=d("div"),Ve(t.$$.fragment),this.h()},l(u){e=p(u,"DIV",{class:!0});var a=b(e);Ue(t.$$.fragment,a),a.forEach(_),this.h()},h(){P(e,"class","rule-wrapper")},m(u,a){B(u,e,a),Se(t,e,null),o=!0,r||(n=[z(e,"click",i),z(e,"mouseover",s),z(e,"focus",kl)],r=!0)},p(u,a){l=u;const m={};a[0]&1&&(m.rule=l[49]),a[0]&1024&&(m.selected=l[10]==l[37]),a[0]&1536&&(m.partially_selected=l[9]==l[37]&&l[10]!=l[37]),t.$set(m)},i(u){o||(te(t.$$.fragment,u),o=!0)},o(u){re(t.$$.fragment,u),o=!1},d(u){u&&_(e),Be(t),r=!1,Ge(n)}}}function zt(l){let e,t=l[35]+"",o,r,n,i,s,u;function a(){return l[26](l[35])}return{c(){e=d("div"),o=U(t),r=C(),n=d("button"),i=U("\xD7"),this.h()},l(m){e=p(m,"DIV",{class:!0});var c=b(e);o=S(c,t),r=R(c),n=p(c,"BUTTON",{class:!0});var k=b(n);i=S(k,"\xD7"),k.forEach(_),c.forEach(_),this.h()},h(){P(n,"class","svelte-4k8o2m"),P(e,"class","available-connector svelte-4k8o2m"),be(e,"shadow",!l[1].includes(l[35]))},m(m,c){B(m,e,c),f(e,o),f(e,r),f(e,n),f(n,i),s||(u=z(n,"click",a),s=!0)},p(m,c){l=m,c[0]&8&&t!==(t=l[35]+"")&&We(o,t),c[0]&10&&be(e,"shadow",!l[1].includes(l[35]))},d(m){m&&_(e),s=!1,u()}}}function ml(l){let e,t;return{c(){e=d("h1"),t=U("Please select a tile"),this.h()},l(o){e=p(o,"H1",{class:!0});var r=b(e);t=S(r,"Please select a tile"),r.forEach(_),this.h()},h(){P(e,"class","svelte-4k8o2m")},m(o,r){B(o,e,r),f(e,t)},p:he,i:he,o:he,d(o){o&&_(e)}}}function vl(l){let e,t,o,r,n,i,s,u,a,m,c,k,v,j,O,q,G,T,I,A,X,L,Z;o=new ot({props:{rule:l[0][l[10]],style:"min-width:100px;min-height:100px;transform: translate(-50%,-50%);"}});let le=l[0][l[10]].connectors,F=[];for(let h=0;h<le.length;h+=1)F[h]=Ft(Rt(l,le,h));let se=l[0][l[10]].connectors,V=[];for(let h=0;h<se.length;h+=1)V[h]=Gt(Bt(l,se,h));const ge=h=>re(V[h],1,1,()=>{V[h]=null});function ke(h){l[31](h)}let fe={style:"flex:1;"};l[0][l[10]].value!==void 0&&(fe.value=l[0][l[10]].value),k=new St({props:fe}),It.push(()=>Ot(k,"value",ke));function Ee(h){l[32](h)}let me={style:"flex:1;"};l[0][l[10]].color!==void 0&&(me.value=l[0][l[10]].color),I=new St({props:me}),It.push(()=>Ot(I,"value",Ee));let K=navigator.clipboard&&bl(l);return{c(){e=d("div"),t=d("div"),Ve(o.$$.fragment),r=C();for(let h=0;h<F.length;h+=1)F[h].c();n=C();for(let h=0;h<V.length;h+=1)V[h].c();i=C(),s=d("div"),u=d("div"),a=d("p"),m=U("Name:"),c=C(),Ve(k.$$.fragment),j=C(),O=d("div"),q=d("p"),G=U("Color:"),T=C(),Ve(I.$$.fragment),X=C(),L=d("div"),K&&K.c(),this.h()},l(h){e=p(h,"DIV",{style:!0});var D=b(e);t=p(D,"DIV",{style:!0});var Y=b(t);Ue(o.$$.fragment,Y),Y.forEach(_),r=R(D);for(let x=0;x<F.length;x+=1)F[x].l(D);n=R(D);for(let x=0;x<V.length;x+=1)V[x].l(D);D.forEach(_),i=R(h),s=p(h,"DIV",{class:!0});var oe=b(s);u=p(oe,"DIV",{style:!0,class:!0});var y=b(u);a=p(y,"P",{style:!0,class:!0});var g=b(a);m=S(g,"Name:"),g.forEach(_),c=R(y),Ue(k.$$.fragment,y),y.forEach(_),j=R(oe),O=p(oe,"DIV",{style:!0,class:!0});var W=b(O);q=p(W,"P",{style:!0,class:!0});var Q=b(q);G=S(Q,"Color:"),Q.forEach(_),T=R(W),Ue(I.$$.fragment,W),W.forEach(_),X=R(oe),L=p(oe,"DIV",{class:!0});var de=b(L);K&&K.l(de),de.forEach(_),oe.forEach(_),this.h()},h(){N(t,"width","0"),N(t,"height","0"),N(e,"flex","1"),N(e,"justify-content","center"),N(e,"display","flex"),N(e,"align-items","center"),N(e,"min-width","750px"),N(e,"min-height","750px"),N(a,"flex","1"),P(a,"class","svelte-4k8o2m"),N(u,"display","flex"),N(u,"justify-content","space-between"),N(u,"border-bottom","1px solid #555"),P(u,"class","svelte-4k8o2m"),N(q,"flex","1"),P(q,"class","svelte-4k8o2m"),N(O,"display","flex"),N(O,"justify-content","space-between"),N(O,"border-bottom","1px solid #555"),P(O,"class","svelte-4k8o2m"),P(L,"class","svelte-4k8o2m"),P(s,"class","properties svelte-4k8o2m")},m(h,D){B(h,e,D),f(e,t),Se(o,t,null),f(e,r);for(let Y=0;Y<F.length;Y+=1)F[Y].m(e,null);f(e,n);for(let Y=0;Y<V.length;Y+=1)V[Y].m(e,null);B(h,i,D),B(h,s,D),f(s,u),f(u,a),f(a,m),f(u,c),Se(k,u,null),f(s,j),f(s,O),f(O,q),f(q,G),f(O,T),Se(I,O,null),f(s,X),f(s,L),K&&K.m(L,null),Z=!0},p(h,D){const Y={};if(D[0]&1025&&(Y.rule=h[0][h[10]]),o.$set(Y),D[0]&5129){le=h[0][h[10]].connectors;let g;for(g=0;g<le.length;g+=1){const W=Rt(h,le,g);F[g]?F[g].p(W,D):(F[g]=Ft(W),F[g].c(),F[g].m(e,n))}for(;g<F.length;g+=1)F[g].d(1);F.length=le.length}if(D[0]&13313){se=h[0][h[10]].connectors;let g;for(g=0;g<se.length;g+=1){const W=Bt(h,se,g);V[g]?(V[g].p(W,D),te(V[g],1)):(V[g]=Gt(W),V[g].c(),te(V[g],1),V[g].m(e,null))}for(Fe(),g=se.length;g<V.length;g+=1)ge(g);qe()}const oe={};!v&&D[0]&1025&&(v=!0,oe.value=h[0][h[10]].value,Pt(()=>v=!1)),k.$set(oe);const y={};!A&&D[0]&1025&&(A=!0,y.value=h[0][h[10]].color,Pt(()=>A=!1)),I.$set(y),navigator.clipboard&&K.p(h,D)},i(h){if(!Z){te(o.$$.fragment,h);for(let D=0;D<se.length;D+=1)te(V[D]);te(k.$$.fragment,h),te(I.$$.fragment,h),Z=!0}},o(h){re(o.$$.fragment,h),V=V.filter(Boolean);for(let D=0;D<V.length;D+=1)re(V[D]);re(k.$$.fragment,h),re(I.$$.fragment,h),Z=!1},d(h){h&&_(e),Be(o),we(F,h),we(V,h),h&&_(i),h&&_(s),Be(k),Be(I),K&&K.d()}}}function Ht(l){let e,t=l[42]+"",o,r;return{c(){e=d("option"),o=U(t),this.h()},l(n){e=p(n,"OPTION",{});var i=b(e);o=S(i,t),i.forEach(_),this.h()},h(){e.__value=r=l[42],e.value=e.__value},m(n,i){B(n,e,i),f(e,o)},p(n,i){i[0]&8&&t!==(t=n[42]+"")&&We(o,t),i[0]&8&&r!==(r=n[42])&&(e.__value=r,e.value=e.__value)},d(n){n&&_(e)}}}function qt(l){let e,t,o,r,n,i=l[3],s=[];for(let a=0;a<i.length;a+=1)s[a]=Ht(jt(l,i,a));function u(){l[28].call(e,l[43],l[44])}return{c(){e=d("select"),t=d("option"),o=U("[delete]");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=p(a,"SELECT",{});var m=b(e);t=p(m,"OPTION",{});var c=b(t);o=S(c,"[delete]"),c.forEach(_);for(let k=0;k<s.length;k+=1)s[k].l(m);m.forEach(_),this.h()},h(){t.__value="null",t.value=t.__value,l[42]===void 0&&Qt(u)},m(a,m){B(a,e,m),f(e,t),f(t,o);for(let c=0;c<s.length;c+=1)s[c].m(e,null);He(e,l[42]),r||(n=z(e,"change",u),r=!0)},p(a,m){if(l=a,m[0]&8){i=l[3];let c;for(c=0;c<i.length;c+=1){const k=jt(l,i,c);s[c]?s[c].p(k,m):(s[c]=Ht(k),s[c].c(),s[c].m(e,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=i.length}m[0]&1033&&He(e,l[42])},d(a){a&&_(e),we(s,a),r=!1,n()}}}function Ft(l){let e,t,o,r,n,i,s,u=l[35],a=[];for(let c=0;c<u.length;c+=1)a[c]=qt(Lt(l,u,c));function m(){return l[29](l[35],l[41],l[37])}return{c(){e=d("div"),t=d("div");for(let c=0;c<a.length;c+=1)a[c].c();o=C(),r=d("button"),n=U("+"),this.h()},l(c){e=p(c,"DIV",{class:!0,style:!0});var k=b(e);t=p(k,"DIV",{class:!0});var v=b(t);for(let O=0;O<a.length;O+=1)a[O].l(v);o=R(v),r=p(v,"BUTTON",{});var j=b(r);n=S(j,"+"),j.forEach(_),v.forEach(_),k.forEach(_),this.h()},h(){P(t,"class","connector-content svelte-4k8o2m"),P(e,"class","connector svelte-4k8o2m"),N(e,"transform",l[12][l[37]])},m(c,k){B(c,e,k),f(e,t);for(let v=0;v<a.length;v+=1)a[v].m(t,null);f(t,o),f(t,r),f(r,n),i||(s=z(r,"click",m),i=!0)},p(c,k){if(l=c,k[0]&1033){u=l[35];let v;for(v=0;v<u.length;v+=1){const j=Lt(l,u,v);a[v]?a[v].p(j,k):(a[v]=qt(j),a[v].c(),a[v].m(t,o))}for(;v<a.length;v+=1)a[v].d(1);a.length=u.length}},d(c){c&&_(e),we(a,c),i=!1,s()}}}function Wt(l){let e,t;return e=new ot({props:{rule:l[38]}}),{c(){Ve(e.$$.fragment)},l(o){Ue(e.$$.fragment,o)},m(o,r){Se(e,o,r),t=!0},p(o,r){const n={};r[0]&1025&&(n.rule=o[38]),e.$set(n)},i(o){t||(te(e.$$.fragment,o),t=!0)},o(o){re(e.$$.fragment,o),t=!1},d(o){Be(e,o)}}}function Gt(l){let e,t,o,r;function n(...a){return l[30](l[37],l[35],...a)}let i=l[0].filter(n),s=[];for(let a=0;a<i.length;a+=1)s[a]=Wt(Ct(l,i,a));const u=a=>re(s[a],1,1,()=>{s[a]=null});return{c(){e=d("div"),t=d("div");for(let a=0;a<s.length;a+=1)s[a].c();o=C(),this.h()},l(a){e=p(a,"DIV",{class:!0,style:!0});var m=b(e);t=p(m,"DIV",{class:!0});var c=b(t);for(let k=0;k<s.length;k+=1)s[k].l(c);c.forEach(_),o=R(m),m.forEach(_),this.h()},h(){P(t,"class","possible-content svelte-4k8o2m"),P(e,"class","possible svelte-4k8o2m"),N(e,"transform",l[12][l[37]])},m(a,m){B(a,e,m),f(e,t);for(let c=0;c<s.length;c+=1)s[c].m(t,null);f(e,o),r=!0},p(a,m){if(l=a,m[0]&9217){i=l[0].filter(n);let c;for(c=0;c<i.length;c+=1){const k=Ct(l,i,c);s[c]?(s[c].p(k,m),te(s[c],1)):(s[c]=Wt(k),s[c].c(),te(s[c],1),s[c].m(t,null))}for(Fe(),c=i.length;c<s.length;c+=1)u(c);qe()}},i(a){if(!r){for(let m=0;m<i.length;m+=1)te(s[m]);r=!0}},o(a){s=s.filter(Boolean);for(let m=0;m<s.length;m+=1)re(s[m]);r=!1},d(a){a&&_(e),we(s,a)}}}function bl(l){let e,t,o,r;return{c(){e=d("button"),t=U("Copy JSON"),this.h()},l(n){e=p(n,"BUTTON",{class:!0});var i=b(e);t=S(i,"Copy JSON"),i.forEach(_),this.h()},h(){P(e,"class","svelte-4k8o2m")},m(n,i){B(n,e,i),f(e,t),o||(r=z(e,"click",l[33]),o=!0)},p:he,d(n){n&&_(e),o=!1,r()}}}function gl(l){let e,t,o,r,n,i,s,u,a,m,c,k,v,j,O,q,G,T,I,A,X,L,Z,le,F,se,V,ge,ke,fe,Ee,me,K,h,D,Y,oe,y,g,W,Q,de,x,Pe,Ke,De,Qe,Ye,pe,Ce,ie,$,Xe,ae,Ze,xe,ye,ue,ce,Re,$e,nt;function st(E,M){return E[8]?pl:dl}let Le=st(l),_e=Le(l),Te=l[0],H=[];for(let E=0;E<Te.length;E+=1)H[E]=Jt(At(l,Te,E));const Xt=E=>re(H[E],1,1,()=>{H[E]=null});let Ie=l[3],ee=[];for(let E=0;E<Ie.length;E+=1)ee[E]=zt(Mt(l,Ie,E));const rt=[vl,ml],ve=[];function it(E,M){return E[10]!=null&&E[0]!=null&&E[0]!=[]?0:1}return ue=it(l),ce=ve[ue]=rt[ue](l),{c(){e=d("main"),t=d("div"),o=d("div"),r=d("select"),n=d("option"),i=U("Dungeon"),s=d("option"),u=U("Platformer"),a=d("option"),m=U("Minecraft"),c=d("option"),k=U("Checkers"),v=d("option"),j=U("Layers"),O=d("option"),q=U("Flowers"),G=d("option"),T=U("Stripes"),I=d("option"),A=U("Houses"),X=C(),L=d("div"),Z=C(),le=d("button"),F=U("new"),se=C(),V=d("button"),ge=U("export"),ke=C(),fe=d("button"),Ee=U("import"),me=C(),K=d("details"),h=d("summary"),D=U("Extract from image"),Y=C(),_e.c(),oe=C(),y=d("h3"),g=U("Tiles"),W=C(),Q=d("div");for(let E=0;E<H.length;E+=1)H[E].c();de=C(),x=d("button"),Pe=U("+"),Ke=C(),De=d("h3"),Qe=U("Connectors"),Ye=C(),pe=d("div");for(let E=0;E<ee.length;E+=1)ee[E].c();Ce=C(),ie=d("div"),$=d("input"),Xe=C(),ae=d("button"),Ze=U("+"),xe=C(),ye=d("div"),ce.c(),this.h()},l(E){e=p(E,"MAIN",{class:!0});var M=b(e);t=p(M,"DIV",{class:!0});var J=b(t);o=p(J,"DIV",{style:!0});var w=b(o);r=p(w,"SELECT",{});var ne=b(r);n=p(ne,"OPTION",{});var at=b(n);i=S(at,"Dungeon"),at.forEach(_),s=p(ne,"OPTION",{});var ut=b(s);u=S(ut,"Platformer"),ut.forEach(_),a=p(ne,"OPTION",{});var ct=b(a);m=S(ct,"Minecraft"),ct.forEach(_),c=p(ne,"OPTION",{});var ft=b(c);k=S(ft,"Checkers"),ft.forEach(_),v=p(ne,"OPTION",{});var _t=b(v);j=S(_t,"Layers"),_t.forEach(_),O=p(ne,"OPTION",{});var ht=b(O);q=S(ht,"Flowers"),ht.forEach(_),G=p(ne,"OPTION",{});var dt=b(G);T=S(dt,"Stripes"),dt.forEach(_),I=p(ne,"OPTION",{});var pt=b(I);A=S(pt,"Houses"),pt.forEach(_),ne.forEach(_),X=R(w),L=p(w,"DIV",{}),b(L).forEach(_),Z=R(w),le=p(w,"BUTTON",{});var mt=b(le);F=S(mt,"new"),mt.forEach(_),se=R(w),V=p(w,"BUTTON",{});var vt=b(V);ge=S(vt,"export"),vt.forEach(_),ke=R(w),fe=p(w,"BUTTON",{});var bt=b(fe);Ee=S(bt,"import"),bt.forEach(_),w.forEach(_),me=R(J),K=p(J,"DETAILS",{});var je=b(K);h=p(je,"SUMMARY",{});var gt=b(h);D=S(gt,"Extract from image"),gt.forEach(_),Y=R(je),_e.l(je),je.forEach(_),oe=R(J),y=p(J,"H3",{style:!0});var kt=b(y);g=S(kt,"Tiles"),kt.forEach(_),W=R(J),Q=p(J,"DIV",{class:!0});var Me=b(Q);for(let Ne=0;Ne<H.length;Ne+=1)H[Ne].l(Me);de=R(Me),x=p(Me,"BUTTON",{class:!0});var Et=b(x);Pe=S(Et,"+"),Et.forEach(_),Me.forEach(_),Ke=R(J),De=p(J,"H3",{});var yt=b(De);Qe=S(yt,"Connectors"),yt.forEach(_),Ye=R(J),pe=p(J,"DIV",{class:!0});var Ae=b(pe);for(let Ne=0;Ne<ee.length;Ne+=1)ee[Ne].l(Ae);Ce=R(Ae),ie=p(Ae,"DIV",{style:!0});var Je=b(ie);$=p(Je,"INPUT",{style:!0}),Xe=R(Je),ae=p(Je,"BUTTON",{style:!0});var Tt=b(ae);Ze=S(Tt,"+"),Tt.forEach(_),Je.forEach(_),Ae.forEach(_),J.forEach(_),xe=R(M),ye=p(M,"DIV",{class:!0});var Nt=b(ye);ce.l(Nt),Nt.forEach(_),M.forEach(_),this.h()},h(){n.__value="5",n.value=n.__value,s.__value="8",s.value=s.__value,a.__value="0",a.value=a.__value,c.__value="1",c.value=c.__value,v.__value="2",v.value=v.__value,O.__value="3",O.value=O.__value,G.__value="6",G.value=G.__value,I.__value="7",I.value=I.__value,l[2]===void 0&&Qt(()=>l[21].call(r)),N(o,"display","flex"),N(o,"gap",".25em"),N(o,"flex-wrap","wrap"),N(y,"margin-block","0"),P(x,"class","add-tile svelte-4k8o2m"),P(Q,"class","selection svelte-4k8o2m"),N($,"height","2em"),N($,"width","8em"),N($,"border","none"),N($,"background-color","#191919"),N($,"padding-top","0px"),N($,"padding-bottom","0px"),N($,"outline","none"),N($,"font-size","1em"),N($,"padding-left",".5em"),N(ae,"height","2em"),N(ae,"box-sizing","content-box"),N(ae,"border","none"),N(ae,"padding-top","0px"),N(ae,"padding-bottom","0px"),N(ae,"font-size","1em"),N(ie,"display","flex"),N(ie,"background-color","#191919"),N(ie,"border","1px solid #2d2c2d"),N(ie,"border-radius",".25rem"),N(ie,"overflow","hidden"),P(pe,"class","available-connectors svelte-4k8o2m"),P(t,"class","browser svelte-4k8o2m"),P(ye,"class","editor svelte-4k8o2m"),P(e,"class","svelte-4k8o2m")},m(E,M){B(E,e,M),f(e,t),f(t,o),f(o,r),f(r,n),f(n,i),f(r,s),f(s,u),f(r,a),f(a,m),f(r,c),f(c,k),f(r,v),f(v,j),f(r,O),f(O,q),f(r,G),f(G,T),f(r,I),f(I,A),He(r,l[2]),f(o,X),f(o,L),f(o,Z),f(o,le),f(le,F),f(o,se),f(o,V),f(V,ge),f(o,ke),f(o,fe),f(fe,Ee),f(t,me),f(t,K),f(K,h),f(h,D),f(K,Y),_e.m(K,null),f(t,oe),f(t,y),f(y,g),f(t,W),f(t,Q);for(let J=0;J<H.length;J+=1)H[J].m(Q,null);f(Q,de),f(Q,x),f(x,Pe),f(t,Ke),f(t,De),f(De,Qe),f(t,Ye),f(t,pe);for(let J=0;J<ee.length;J+=1)ee[J].m(pe,null);f(pe,Ce),f(pe,ie),f(ie,$),Oe($,l[11]),f(ie,Xe),f(ie,ae),f(ae,Ze),f(e,xe),f(e,ye),ve[ue].m(ye,null),Re=!0,$e||(nt=[z(r,"change",l[21]),z(le,"click",l[14]),z(V,"click",l[15]),z(fe,"click",l[16]),z(x,"click",l[17]),z($,"input",l[27]),z(ae,"click",l[19]),z(e,"mouseover",l[34]),z(e,"focus",El)],$e=!0)},p(E,M){if(M[0]&4&&He(r,E[2]),Le===(Le=st(E))&&_e?_e.p(E,M):(_e.d(1),_e=Le(E),_e&&(_e.c(),_e.m(K,null))),M[0]&1537){Te=E[0];let w;for(w=0;w<Te.length;w+=1){const ne=At(E,Te,w);H[w]?(H[w].p(ne,M),te(H[w],1)):(H[w]=Jt(ne),H[w].c(),te(H[w],1),H[w].m(Q,de))}for(Fe(),w=Te.length;w<H.length;w+=1)Xt(w);qe()}if(M[0]&262154){Ie=E[3];let w;for(w=0;w<Ie.length;w+=1){const ne=Mt(E,Ie,w);ee[w]?ee[w].p(ne,M):(ee[w]=zt(ne),ee[w].c(),ee[w].m(pe,Ce))}for(;w<ee.length;w+=1)ee[w].d(1);ee.length=Ie.length}M[0]&2048&&$.value!==E[11]&&Oe($,E[11]);let J=ue;ue=it(E),ue===J?ve[ue].p(E,M):(Fe(),re(ve[J],1,1,()=>{ve[J]=null}),qe(),ce=ve[ue],ce?ce.p(E,M):(ce=ve[ue]=rt[ue](E),ce.c()),te(ce,1),ce.m(ye,null))},i(E){if(!Re){for(let M=0;M<Te.length;M+=1)te(H[M]);te(ce),Re=!0}},o(E){H=H.filter(Boolean);for(let M=0;M<H.length;M+=1)re(H[M]);re(ce),Re=!1},d(E){E&&_(e),_e.d(),we(H,E),we(ee,E),ve[ue].d(),$e=!1,Ge(nt)}}}const kl=()=>{},El=()=>{};function yl(l,e,t){const o=["translate( 0,  var(--sm))","translate(var(--sm), 0px)","translate( 0,   var(--s))","translate( var(--s), 0px)"],r={0:2,1:3,2:0,3:1};let n=Dt,i=[],s=[];function u(){t(0,n=[])}function a(){let y=JSON.stringify(n);console.info(y),alert(y)}function m(){let y=prompt("Paste rules here:");if(y!=null)try{let g=JSON.parse(y);t(0,n=g)}catch(g){alert("Error parsing rules: "+g)}}function c(){let y=prompt("Tile name");if(y==null)return;let g=prompt("Tile color");g!=null&&(n.push({value:y,color:g,connectors:[[],[],[],[]]}),t(0,n),t(2,A))}function k(y){for(let g of n)g.connectors=g.connectors.map(W=>W.filter(Q=>Q!==y));t(0,n),t(2,A)}function v(){Z!=null&&Z!==""&&(t(3,i=[...i,Z]),console.log("Added new connector",Z),t(11,Z=null))}let j,O=0,q="",G=3;function T(){t(5,O=0),t(6,q="");let y=j[0];if(y!=null){t(5,O=5),t(6,q="Reading image...");let g=new FileReader;g.readAsDataURL(y),g.onload=async W=>{var de;let Q=(de=W.target)==null?void 0:de.result;if(Q){console.log(Q),t(5,O=25),t(6,q="Extracting features..."),await new Promise(Pe=>setTimeout(Pe,500));let x=rl(Q,G);t(5,O=75),t(6,q="Parsing results..."),t(0,n=JSON.parse(x)),t(5,O=100),t(6,q="Rules extracted.")}}}}let I=!1;Kt(()=>{Zt().then(()=>{t(8,I=!0)})});let A="5",X,L,Z;function le(){A=wt(this),t(2,A)}function F(){j=this.files,t(4,j)}function se(){G=Yt(this.value),t(7,G)}const V=y=>{t(10,L=y),t(9,X=y)},ge=(y,g)=>{t(10,L=y),g.preventDefault(),g.stopPropagation()},ke=y=>{k(y)};function fe(){Z=this.value,t(11,Z)}function Ee(y,g){y[g]=wt(this),t(0,n),t(2,A),t(10,L),t(2,A),t(3,i),t(0,n),t(1,s),t(2,A)}const me=(y,g,W)=>{y.push(i.length>0?i[0]:"new connector"),t(0,g[W]=y,n,(t(10,L),t(2,A)))},K=(y,g,W)=>W.connectors[r[y]].filter(Q=>g.includes(Q)).length>0;function h(y){l.$$.not_equal(n[L].value,y)&&(n[L].value=y,t(0,n),t(2,A))}function D(y){l.$$.not_equal(n[L].color,y)&&(n[L].color=y,t(0,n),t(2,A))}const Y=()=>{navigator.clipboard.writeText(JSON.stringify(n[L],null,4))},oe=()=>{t(10,L=X)};return l.$$.update=()=>{l.$$.dirty[0]&4&&A!=null&&(t(0,n=[xt,$t,el,tl,ll,Dt,ol,nl,sl][+A]),t(9,X=null),t(10,L=null)),l.$$.dirty[0]&3&&n!=null&&(k("null"),t(1,s=[...new Set(n.map(y=>y.connectors.flat()).flat())]),t(3,i=[...s]))},[n,s,A,i,j,O,q,G,I,X,L,Z,o,r,u,a,m,c,k,v,T,le,F,se,V,ge,ke,fe,Ee,me,K,h,D,Y,oe]}class wl extends et{constructor(e){super(),tt(this,e,yl,gl,lt,{},null,[-1,-1])}}export{wl as default};
