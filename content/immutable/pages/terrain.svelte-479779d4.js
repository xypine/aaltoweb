import{S as ul,i as fl,s as vl,e as v,c as d,a as _,d as c,f as I,b as n,g as j,k as y,m as E,J as a,t as w,h as A,K as J,j as Be,l as xe,L as je,M as hl,N as dl,Q as ae,R as Je,n as $e,w as pl}from"../chunks/index-be5dee29.js";import{i as _l,t as ml,r as gl,e as bl,g as yl,h as el}from"../chunks/@vite-plugin-wasm-pack@aalto2-32796f27.js";function ll(i,l,e){const t=i.slice();return t[25]=l[e],t[27]=e,t}function tl(i,l,e){const t=i.slice();return t[28]=l[e],t[30]=e,t}function sl(i,l,e){const t=i.slice();return t[31]=l[e],t}function il(i){let l;function e(r,o){return r[4]?kl:El}let t=e(i),s=t(i);return{c(){l=v("div"),s.c(),this.h()},l(r){l=d(r,"DIV",{style:!0,class:!0});var o=_(l);s.l(o),o.forEach(c),this.h()},h(){I(l,"height","100%"),I(l,"width","100%"),I(l,"display","grid"),I(l,"place-items","center"),n(l,"class","svelte-ch60vi")},m(r,o){j(r,l,o),s.m(l,null)},p(r,o){t!==(t=e(r))&&(s.d(1),s=t(r),s&&(s.c(),s.m(l,null)))},d(r){r&&c(l),s.d()}}}function El(i){let l,e;return{c(){l=v("p"),e=w("Loading wasm..."),this.h()},l(t){l=d(t,"P",{class:!0});var s=_(l);e=A(s,"Loading wasm..."),s.forEach(c),this.h()},h(){n(l,"class","svelte-ch60vi")},m(t,s){j(t,l,s),a(l,e)},d(t){t&&c(l)}}}function kl(i){let l,e,t,s;return{c(){l=v("p"),e=w("Error while executing wasm. "),t=v("br"),s=w(`
                        Are the rules valid?`),this.h()},l(r){l=d(r,"P",{class:!0});var o=_(l);e=A(o,"Error while executing wasm. "),t=d(o,"BR",{class:!0}),s=A(o,`
                        Are the rules valid?`),o.forEach(c),this.h()},h(){n(t,"class","svelte-ch60vi"),n(l,"class","svelte-ch60vi")},m(r,o){j(r,l,o),a(l,e),a(l,t),a(l,s)},d(r){r&&c(l)}}}function al(i){let l,e=i[28].possible.length!=1&&rl(i);return{c(){l=v("div"),e&&e.c(),this.h()},l(t){l=d(t,"DIV",{class:!0});var s=_(l);e&&e.l(s),s.forEach(c),this.h()},h(){n(l,"class","possibilities svelte-ch60vi")},m(t,s){j(t,l,s),e&&e.m(l,null)},p(t,s){t[28].possible.length!=1?e?e.p(t,s):(e=rl(t),e.c(),e.m(l,null)):e&&(e.d(1),e=null)},d(t){t&&c(l),e&&e.d()}}}function rl(i){let l,e=i[28].possible,t=[];for(let s=0;s<e.length;s+=1)t[s]=ol(sl(i,e,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();l=xe()},l(s){for(let r=0;r<t.length;r+=1)t[r].l(s);l=xe()},m(s,r){for(let o=0;o<t.length;o+=1)t[o].m(s,r);j(s,l,r)},p(s,r){if(r[0]&8){e=s[28].possible;let o;for(o=0;o<e.length;o+=1){const h=sl(s,e,o);t[o]?t[o].p(h,r):(t[o]=ol(h),t[o].c(),t[o].m(l.parentNode,l))}for(;o<t.length;o+=1)t[o].d(1);t.length=e.length}},d(s){je(t,s),s&&c(l)}}}function ol(i){let l;return{c(){l=v("div"),this.h()},l(e){l=d(e,"DIV",{class:!0,style:!0}),_(l).forEach(c),this.h()},h(){n(l,"class","possible svelte-ch60vi"),I(l,"--color",i[31].color),I(l,"--opacity",1/i[28].possible.length)},m(e,t){j(e,l,t)},p(e,t){t[0]&8&&I(l,"--color",e[31].color),t[0]&8&&I(l,"--opacity",1/e[28].possible.length)},d(e){e&&c(l)}}}function nl(i){let l,e="",t,s,r,o,h,p=i[5]&&al(i);function G(){return i[13](i[30],i[27])}function C(...b){return i[14](i[30],i[27],...b)}return{c(){l=v("div"),t=w(e),s=y(),r=y(),p&&p.c(),this.h()},l(b){l=d(b,"DIV",{class:!0,title:!0,style:!0});var g=_(l);t=A(g,e),s=E(g),r=E(g),p&&p.l(g),g.forEach(c),this.h()},h(){n(l,"class","tile svelte-ch60vi"),n(l,"title",`${i[30]}, ${i[27]}`),I(l,"--bg",i[28].possible.length==1?i[28].possible[0].color:"transparent")},m(b,g){j(b,l,g),a(l,t),a(l,s),a(l,r),p&&p.m(l,null),o||(h=[J(l,"click",G),J(l,"mouseover",C),J(l,"focus",null)],o=!0)},p(b,g){i=b,g[0]&8&&e!==(e="")&&Be(t,e),i[5]?p?p.p(i,g):(p=al(i),p.c(),p.m(l,null)):p&&(p.d(1),p=null),g[0]&8&&I(l,"--bg",i[28].possible.length==1?i[28].possible[0].color:"transparent")},d(b){b&&c(l),p&&p.d(),o=!1,hl(h)}}}function cl(i){let l,e,t=i[25],s=[];for(let r=0;r<t.length;r+=1)s[r]=nl(tl(i,t,r));return{c(){l=v("div");for(let r=0;r<s.length;r+=1)s[r].c();e=y(),this.h()},l(r){l=d(r,"DIV",{class:!0});var o=_(l);for(let h=0;h<s.length;h+=1)s[h].l(o);e=E(o),o.forEach(c),this.h()},h(){n(l,"class","col svelte-ch60vi")},m(r,o){j(r,l,o);for(let h=0;h<s.length;h+=1)s[h].m(l,null);a(l,e)},p(r,o){if(o[0]&552){t=r[25];let h;for(h=0;h<t.length;h+=1){const p=tl(r,t,h);s[h]?s[h].p(p,o):(s[h]=nl(p),s[h].c(),s[h].m(l,e))}for(;h<s.length;h+=1)s[h].d(1);s.length=t.length}},d(r){r&&c(l),je(s,r)}}}function Sl(i){let l,e,t,s,r,o,h,p,G,C,b,g,W,U,k,Z,S,O,re,N,Y,oe,ne,M,ce,P,m,L,H,K,x,ye,Ee,q,ke,B,le,Se,we,R,$,Ae,Ie,V,Le,fe,Te,ze,te,De,Ne,Q,X,he=i[6]?"Stop":"Solve",ve,Me,F,Ve,Oe,Ge,T=(!i[3]||i[3].length==0)&&il(i),se=i[3],z=[];for(let u=0;u<se.length;u+=1)z[u]=cl(ll(i,se,u));return{c(){l=y(),e=v("main"),t=v("h1"),s=w("AALTO"),r=y(),o=v("p"),h=w("made by "),p=v("a"),G=w("elias eskelinen"),C=y(),b=v("details"),g=v("summary"),W=w("Edit the rules"),U=y(),k=v("textarea"),Z=y(),S=v("div"),T&&T.c(),O=y();for(let u=0;u<z.length;u+=1)z[u].c();re=y(),N=v("div"),Y=v("label"),oe=w("Grid size:"),ne=y(),M=v("input"),ce=y(),P=v("details"),m=v("summary"),L=w("Performance"),H=y(),K=v("div"),x=v("label"),ye=w("Show possible:"),Ee=y(),q=v("input"),ke=y(),B=v("details"),le=v("summary"),Se=w("Solving"),we=y(),R=v("div"),$=v("label"),Ae=w("Solve delay:"),Ie=y(),V=v("input"),Le=y(),fe=w(i[2]),Te=w(" ms"),ze=y(),te=v("small"),De=w("set delay to 0 for maximum speed"),Ne=y(),Q=v("div"),X=v("button"),ve=w(he),Me=y(),F=v("button"),Ve=w("Reset"),this.h()},l(u){dl('[data-svelte="svelte-bf8aw6"]',document.head).forEach(c),l=E(u),e=d(u,"MAIN",{class:!0});var f=_(e);t=d(f,"H1",{class:!0});var ue=_(t);s=A(ue,"AALTO"),ue.forEach(c),r=E(f),o=d(f,"P",{class:!0});var Re=_(o);h=A(Re,"made by "),p=d(Re,"A",{href:!0,class:!0});var Ce=_(p);G=A(Ce,"elias eskelinen"),Ce.forEach(c),Re.forEach(c),C=E(f),b=d(f,"DETAILS",{style:!0,class:!0});var de=_(b);g=d(de,"SUMMARY",{class:!0});var Ye=_(g);W=A(Ye,"Edit the rules"),Ye.forEach(c),U=E(de),k=d(de,"TEXTAREA",{style:!0,class:!0}),_(k).forEach(c),de.forEach(c),Z=E(f),S=d(f,"DIV",{class:!0,style:!0});var pe=_(S);T&&T.l(pe),O=E(pe);for(let Ue=0;Ue<z.length;Ue+=1)z[Ue].l(pe);pe.forEach(c),re=E(f),N=d(f,"DIV",{class:!0});var _e=_(N);Y=d(_e,"LABEL",{for:!0,class:!0});var qe=_(Y);oe=A(qe,"Grid size:"),qe.forEach(c),ne=E(_e),M=d(_e,"INPUT",{id:!0,type:!0,class:!0}),_e.forEach(c),ce=E(f),P=d(f,"DETAILS",{class:!0});var me=_(P);m=d(me,"SUMMARY",{class:!0});var He=_(m);L=A(He,"Performance"),He.forEach(c),H=E(me),K=d(me,"DIV",{class:!0});var ge=_(K);x=d(ge,"LABEL",{for:!0,class:!0});var Ke=_(x);ye=A(Ke,"Show possible:"),Ke.forEach(c),Ee=E(ge),q=d(ge,"INPUT",{id:!0,type:!0,class:!0}),ge.forEach(c),me.forEach(c),ke=E(f),B=d(f,"DETAILS",{class:!0});var ie=_(B);le=d(ie,"SUMMARY",{class:!0});var Qe=_(le);Se=A(Qe,"Solving"),Qe.forEach(c),we=E(ie),R=d(ie,"DIV",{class:!0});var ee=_(R);$=d(ee,"LABEL",{for:!0,class:!0});var Xe=_($);Ae=A(Xe,"Solve delay:"),Xe.forEach(c),Ie=E(ee),V=d(ee,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),Le=E(ee),fe=A(ee,i[2]),Te=A(ee," ms"),ee.forEach(c),ze=E(ie),te=d(ie,"SMALL",{class:!0});var Fe=_(te);De=A(Fe,"set delay to 0 for maximum speed"),Fe.forEach(c),ie.forEach(c),Ne=E(f),Q=d(f,"DIV",{class:!0});var be=_(Q);X=d(be,"BUTTON",{style:!0,class:!0});var We=_(X);ve=A(We,he),We.forEach(c),Me=E(be),F=d(be,"BUTTON",{style:!0,class:!0});var Ze=_(F);Ve=A(Ze,"Reset"),Ze.forEach(c),be.forEach(c),f.forEach(c),this.h()},h(){document.title="AALTO",n(t,"class","svelte-ch60vi"),n(p,"href","https://eliaseskelinen.fi"),n(p,"class","svelte-ch60vi"),n(o,"class","svelte-ch60vi"),n(g,"class","svelte-ch60vi"),I(k,"min-width","var(--grid-max-size)"),I(k,"resize","block"),I(k,"min-height","var(--grid-max-size)"),n(k,"class","svelte-ch60vi"),I(b,"min-width","var(--grid-max-size)"),n(b,"class","svelte-ch60vi"),n(S,"class","grid svelte-ch60vi"),I(S,"--size",i[1]),n(Y,"for","width"),n(Y,"class","svelte-ch60vi"),n(M,"id","width"),n(M,"type","number"),n(M,"class","svelte-ch60vi"),n(N,"class","svelte-ch60vi"),n(m,"class","svelte-ch60vi"),n(x,"for","show-possible"),n(x,"class","svelte-ch60vi"),n(q,"id","show-possible"),n(q,"type","checkbox"),n(q,"class","svelte-ch60vi"),n(K,"class","svelte-ch60vi"),n(P,"class","svelte-ch60vi"),n(le,"class","svelte-ch60vi"),n($,"for","speed"),n($,"class","svelte-ch60vi"),n(V,"id","speed"),n(V,"type","range"),n(V,"min","0"),n(V,"max","75"),n(V,"class","svelte-ch60vi"),n(R,"class","svelte-ch60vi"),n(te,"class","svelte-ch60vi"),n(B,"class","svelte-ch60vi"),I(X,"padding","0.25em 1em"),n(X,"class","svelte-ch60vi"),I(F,"padding","0.25em 1em"),n(F,"class","svelte-ch60vi"),n(Q,"class","svelte-ch60vi"),n(e,"class","svelte-ch60vi")},m(u,D){j(u,l,D),j(u,e,D),a(e,t),a(t,s),a(e,r),a(e,o),a(o,h),a(o,p),a(p,G),a(e,C),a(e,b),a(b,g),a(g,W),a(b,U),a(b,k),ae(k,i[0]),a(e,Z),a(e,S),T&&T.m(S,null),a(S,O);for(let f=0;f<z.length;f+=1)z[f].m(S,null);a(e,re),a(e,N),a(N,Y),a(Y,oe),a(N,ne),a(N,M),ae(M,i[1]),a(e,ce),a(e,P),a(P,m),a(m,L),a(P,H),a(P,K),a(K,x),a(x,ye),a(K,Ee),a(K,q),q.checked=i[5],a(e,ke),a(e,B),a(B,le),a(le,Se),a(B,we),a(B,R),a(R,$),a($,Ae),a(R,Ie),a(R,V),ae(V,i[2]),a(R,Le),a(R,fe),a(R,Te),a(B,ze),a(B,te),a(te,De),a(e,Ne),a(e,Q),a(Q,X),a(X,ve),a(Q,Me),a(Q,F),a(F,Ve),Oe||(Ge=[J(k,"input",i[12]),J(M,"input",i[15]),J(q,"change",i[16]),J(V,"change",i[17]),J(V,"input",i[17]),J(X,"click",i[8]),J(F,"click",i[7])],Oe=!0)},p(u,D){if(D[0]&1&&ae(k,u[0]),!u[3]||u[3].length==0?T?T.p(u,D):(T=il(u),T.c(),T.m(S,O)):T&&(T.d(1),T=null),D[0]&552){se=u[3];let f;for(f=0;f<se.length;f+=1){const ue=ll(u,se,f);z[f]?z[f].p(ue,D):(z[f]=cl(ue),z[f].c(),z[f].m(S,null))}for(;f<z.length;f+=1)z[f].d(1);z.length=se.length}D[0]&2&&I(S,"--size",u[1]),D[0]&2&&Je(M.value)!==u[1]&&ae(M,u[1]),D[0]&32&&(q.checked=u[5]),D[0]&4&&ae(V,u[2]),D[0]&4&&Be(fe,u[2]),D[0]&64&&he!==(he=u[6]?"Stop":"Solve")&&Be(ve,he)},i:$e,o:$e,d(u){u&&c(l),u&&c(e),T&&T.d(),je(z,u),Oe=!1,hl(Ge)}}}let Pe=32;function wl(i,l,e){let t=ml,s=new Map,r=[0,0],o=[];function h(){return JSON.stringify({tiles:s.get(r)})}function p(m){let L=JSON.parse(m);s.set(r,L.tiles),e(3,o=s.get(r))}let G=!1;function C(){if(!!g){e(6,k=!1);try{let m=gl(U,U,t),L=JSON.parse(m);e(3,o=L),s.set(r,L),e(4,G=!1)}catch(m){console.warn(m),e(3,o=[]),s.set(r,[]),e(4,G=!0)}}}function b(){if(O==0){k&&S&&clearInterval(S),console.log("Starting solve...");let m=bl(h(),Pe);p(m),console.log("Solve done!")}else k?(e(6,k=!1),console.log("Solve stopped!")):(console.log("Starting solve..."),e(6,k=!0))}let g=!1;pl(()=>{_l().then(()=>{e(10,g=!0)})});let W=!0,U=16,k=!1,Z=!1,S,O=0;function re(){if(k&&!Z){Z=!0;let m=JSON.parse(yl(h()));if(m){console.log("Collapsing",m);let L=el(h(),m[0],m[1],Pe);p(L)}else e(6,k=!1),console.log("Solve done!");Z=!1}}function N(m,L){if(!g)return;console.log("In",h());let H=el(h(),m,L,Pe);p(H)}function Y(){t=this.value,e(0,t)}const oe=(m,L)=>{N(m,L)},ne=(m,L,H)=>{(H.buttons==1||H.buttons==3)&&N(m,L)};function M(){U=Je(this.value),e(1,U)}function ce(){W=this.checked,e(5,W)}function P(){O=Je(this.value),e(2,O)}return i.$$.update=()=>{i.$$.dirty[0]&1025&&t&&g&&C(),i.$$.dirty[0]&1026&&U&&g&&C(),i.$$.dirty[0]&2052&&O!=null&&(S&&clearInterval(S),e(11,S=setInterval(re,O)))},[t,U,O,o,G,W,k,C,b,N,g,S,Y,oe,ne,M,ce,P]}class Ll extends ul{constructor(l){super(),fl(this,l,wl,Sl,vl,{},null,[-1,-1])}}export{Ll as default};
